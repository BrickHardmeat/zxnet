<!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/89F9.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:20 GMT -->
<head>
<title>Chaos: Routine at 89F9</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="89EF.html">89EF</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#89F9">Map</a></td>
<td class="next">
Next: <a href="8F8B.html">8F8B</a>
</td>
</tr>
</table>
<div class="description">89F9: The main game routine.</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="7D00.html">start</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">main_routine</td>
<td class="address-2"><span id="89F9"></span>89F9</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Set border to black.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89FA"></span>89FA</td>
<td class="instruction">OUT ($FE),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89FC"></span>89FC</td>
<td class="instruction">LD ($5C8F),A</td>
<td class="comment-1" rowspan="1">Set ATTR-T to black.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89FF"></span>89FF</td>
<td class="instruction">LD ($5C8D),A</td>
<td class="comment-1" rowspan="1">Set ATTR-P to black.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A02"></span>8A02</td>
<td class="instruction">LD A,$FF</td>
<td class="comment-1" rowspan="2">Set MASK-P to all transparent.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A04"></span>8A04</td>
<td class="instruction">LD ($5C8E),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A07"></span>8A07</td>
<td class="instruction">LD A,$03</td>
<td class="comment-1" rowspan="2">Set P-FLAGS to 3 (OVER mode).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A09"></span>8A09</td>
<td class="instruction">LD ($5C91),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A0C"></span>8A0C</td>
<td class="instruction">DI</td>
<td class="comment-1" rowspan="1">Disable interrupts.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A0D"></span>8A0D</td>
<td class="instruction">CALL <a href="C5EE.html">CLS</a></td>
<td class="comment-1" rowspan="1">Clear the screen.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A10"></span>8A10</td>
<td class="instruction">LD HL,<a href="AC16.html">unknown_table_3</a></td>
<td class="comment-1" rowspan="5">Zero out <a href="AC16.html">unknown_table_3</a>, <a href="AC1E.html">unknown_table_4</a>, <a href="AC26.html">WIZCON</a>, <a href="AC2E.html">computer_player_flag</a>, <a href="AC2F.html">LAC2F</a>, <a href="AC30.html">unknown29</a>, <a href="AC31.html">unknown30</a>, <a href="AC32.html">unknown31</a>, <a href="AC33.html">unknown32</a>, <a href="AC34.html">num_dead_wizards</a>, and <a href="AC35.html">unknown34</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A13"></span>8A13</td>
<td class="instruction">LD DE,$AC17</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A16"></span>8A16</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A18"></span>8A18</td>
<td class="instruction">LD BC,$001F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A1B"></span>8A1B</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A1D"></span>8A1D</td>
<td class="instruction">LD HL,<a href="7F47.html">possesssed_spell_tables</a></td>
<td class="comment-1" rowspan="5">Zero out <a href="7F47.html">possesssed_spell_tables</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A20"></span>8A20</td>
<td class="instruction">LD DE,$7F48</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A23"></span>8A23</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A25"></span>8A25</td>
<td class="instruction">LD BC,$013F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A28"></span>8A28</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A2A"></span>8A2A</td>
<td class="instruction">LD HL,<a href="E01F.html">map_object_table</a></td>
<td class="comment-1" rowspan="5">Zero out <a href="E01F.html">map_object_table</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A2D"></span>8A2D</td>
<td class="instruction">LD DE,$E020</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A30"></span>8A30</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A32"></span>8A32</td>
<td class="instruction">LD BC,$009F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A35"></span>8A35</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A37"></span>8A37</td>
<td class="instruction">LD HL,<a href="E0C0.html">map_animation_timeout_table</a></td>
<td class="comment-1" rowspan="5">Zero out <a href="E0C0.html">map_animation_timeout_table</a>, <a href="E160.html">map_animation_frame_table</a>, <a href="E200.html">map_object_properties_table</a>, <a href="E2A0.html">fifth_map_table</a>, and <a href="E340.html">sixth_map_table</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A3A"></span>8A3A</td>
<td class="instruction">LD DE,$E0C1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A3D"></span>8A3D</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A3F"></span>8A3F</td>
<td class="instruction">LD BC,$031F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A42"></span>8A42</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A44"></span>8A44</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Set <a href="C3A4.html">CH_LAW</a> to zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A46"></span>8A46</td>
<td class="instruction">LD (<a href="C3A4.html">CH_LAW</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A49"></span>8A49</td>
<td class="instruction">LD A,$5A</td>
<td class="comment-1" rowspan="3">Set ATTR-T to $5A (bright red on magenta) and draw border.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A4B"></span>8A4B</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A4E"></span>8A4E</td>
<td class="instruction">CALL <a href="BB57.html">ZRDR_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A51"></span>8A51</td>
<td class="instruction">LD A,$43</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $43 (bright magenta on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A53"></span>8A53</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A56"></span>8A56</td>
<td class="instruction">LD BC,$0202</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html">M_1</a> at coordinates (2,2).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A59"></span>8A59</td>
<td class="instruction">LD A,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A5B"></span>8A5B</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A5E"></span>8A5E</td>
<td class="instruction">LD A,$42</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $42 (bright red on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A60"></span>8A60</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A63"></span>8A63</td>
<td class="instruction">LD BC,$0408</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8875">M_2</a> at coordinates (8,4).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A66"></span>8A66</td>
<td class="instruction">LD A,$01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A68"></span>8A68</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A6B"></span>8A6B</td>
<td class="instruction">LD A,$46</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $46 (bright yellow on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A6D"></span>8A6D</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A70"></span>8A70</td>
<td class="instruction">LD BC,$0902</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8885">M_3</a> at coordinates (2,9).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A73"></span>8A73</td>
<td class="instruction">LD A,$02</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A75"></span>8A75</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A78"></span>8A78</td>
<td class="instruction">LD A,$44</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $44 (bright green on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A7A"></span>8A7A</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A7D"></span>8A7D</td>
<td class="instruction">LD BC,$0B02</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8941">M_15</a> at coordinates (2,11).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A80"></span>8A80</td>
<td class="instruction">LD A,$0E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A82"></span>8A82</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A85"></span>8A85</td>
<td class="instruction">LD BC,$0914</td>
<td class="comment-1" rowspan="1">Set BC to coordinates (20,9).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A88"></span>8A88</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Set the flag to prevent numbers less than 2 in input.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A8A"></span>8A8A</td>
<td class="instruction">LD (<a href="8323.html">no_less_than_2_flag</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A8D"></span>8A8D</td>
<td class="instruction">CALL <a href="89B0.html">CHONUM</a></td>
<td class="comment-1" rowspan="1">Get number input from 2 to 8. This also appends 4 semi-random bytes to <a href="D3F2.html">INBUF</a>. When the game is loaded <a href="CD86.html">BUFPNT</a> is pointing at the fourth byte in the buffer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A90"></span>8A90</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="2">Increment the number input and store in <a href="AC0F.html">NO_PLA</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A91"></span>8A91</td>
<td class="instruction">LD (<a href="AC0F.html">NO_PLA</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A94"></span>8A94</td>
<td class="instruction">LD A,$46</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $46 (bright yellow on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A96"></span>8A96</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A99"></span>8A99</td>
<td class="instruction">LD BC,$0E02</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#88C7">M_9</a> at coordinates (2,14).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A9C"></span>8A9C</td>
<td class="instruction">LD A,$08</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8A9E"></span>8A9E</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AA1"></span>8AA1</td>
<td class="instruction">LD A,$43</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $43 (bright magenta on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AA3"></span>8AA3</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AA6"></span>8AA6</td>
<td class="instruction">LD BC,$1002</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8897">M_4</a> at coordinates (2,16).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AA9"></span>8AA9</td>
<td class="instruction">LD A,$03</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AAB"></span>8AAB</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AAE"></span>8AAE</td>
<td class="instruction">LD BC,$0E1D</td>
<td class="comment-1" rowspan="2">Set coordinates (29,14) and get number input from 1 to 8. This also appends 4 semi-random bytes to <a href="D3F2.html">INBUF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AB1"></span>8AB1</td>
<td class="instruction">CALL <a href="89B0.html">CHONUM</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AB4"></span>8AB4</td>
<td class="instruction">LD (<a href="89A7.html">LEVEL</a>),A</td>
<td class="comment-1" rowspan="1">Store input in <a href="89A7.html">LEVEL</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AB7"></span>8AB7</td>
<td class="instruction">SLA A</td>
<td class="comment-1" rowspan="3">Multiply level by four and add fifteen.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AB9"></span>8AB9</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ABB"></span>8ABB</td>
<td class="instruction">ADD A,$0F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ABD"></span>8ABD</td>
<td class="instruction">LD (<a href="89A9.html">GAMTUN</a>),A</td>
<td class="comment-1" rowspan="1">Store the result in <a href="89A9.html">GAMTUN</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AC0"></span>8AC0</td>
<td class="instruction">LD B,$0A</td>
<td class="comment-1" rowspan="1">Set B to ten as a loop counter.</td>
</tr>
<tr>
<td class="asm-label">REPWAT</td>
<td class="address-2"><span id="8AC2"></span>8AC2</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="4">Call <a href="96E6.html">PAUSER</a> ten times to delay for approximately 1.5 seconds.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AC3"></span>8AC3</td>
<td class="instruction">CALL <a href="96E6.html">PAUSER</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AC6"></span>8AC6</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AC7"></span>8AC7</td>
<td class="instruction">DJNZ <a href="89F9.html#8AC2">REPWAT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AC9"></span>8AC9</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Set <a href="AC0E.html">current_player</a> to zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ACB"></span>8ACB</td>
<td class="instruction">LD (<a href="AC0E.html">current_player</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ACE"></span>8ACE</td>
<td class="instruction">LD A,(<a href="AC0F.html">NO_PLA</a>)</td>
<td class="comment-1" rowspan="2">Get <a href="AC0F.html">NO_PLA</a> into B as loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AD1"></span>8AD1</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AD2"></span>8AD2</td>
<td class="instruction">LD HL,<a href="D3F2.html">INBUF</a></td>
<td class="comment-1" rowspan="2">Reset <a href="CD86.html">BUFPNT</a> to beginning of <a href="D3F2.html">INBUF</a>. As each user makes selections at the following prompts, semi-random bytes are stored in <a href="D3F2.html">INBUF</a>. This is then used a source of randomness when assigning spells. The bytes generated above are overwritten.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AD5"></span>8AD5</td>
<td class="instruction">LD (<a href="CD86.html">BUFPNT</a>),HL</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8AD8"></span>
<div class="comments">
<div class="paragraph">
This is the wizard creation loop where the user enters the wizard name, whether it is a human or computer player, and selects the appearance. The wizard's attributes are then generated randomly.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">STALOO</td>
<td class="address-2"><span id="8AD8"></span>8AD8</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Preserve loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AD9"></span>8AD9</td>
<td class="instruction">CALL <a href="C5EE.html">CLS</a></td>
<td class="comment-1" rowspan="1">Clear the screen.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ADC"></span>8ADC</td>
<td class="instruction">LD A,$69</td>
<td class="comment-1" rowspan="3">Set ATTR-T to $69 (bright blue on cyan) and draw border.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ADE"></span>8ADE</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AE1"></span>8AE1</td>
<td class="instruction">CALL <a href="BB57.html">ZRDR_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AE4"></span>8AE4</td>
<td class="instruction">LD BC,$0202</td>
<td class="comment-1" rowspan="5">Set ATTR-T to $46 (bright yellow on black) and print message <a href="8859.html#88A6">M_5</a> at coordinates (2,2).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AE7"></span>8AE7</td>
<td class="instruction">LD A,$46</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AE9"></span>8AE9</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AEC"></span>8AEC</td>
<td class="instruction">LD A,$04</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AEE"></span>8AEE</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AF1"></span>8AF1</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
<td class="comment-1" rowspan="3">Print current player number.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AF4"></span>8AF4</td>
<td class="instruction">ADD A,$31</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AF6"></span>8AF6</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AF9"></span>8AF9</td>
<td class="instruction">LD A,$43</td>
<td class="comment-1" rowspan="5">Set ATTR-T to $43 (bright magenta on black) and print message <a href="8859.html#88E2">M_10</a> at coordinates (2,4).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AFB"></span>8AFB</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8AFE"></span>8AFE</td>
<td class="instruction">LD BC,$0402</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B01"></span>8B01</td>
<td class="instruction">LD A,$09</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B03"></span>8B03</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B06"></span>8B06</td>
<td class="instruction">CALL <a href="8300.html">get_wizard_object</a></td>
<td class="comment-1" rowspan="1">Get address of wizard object data for current player.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B09"></span>8B09</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Set <a href="89AE.html">string_length</a> to zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B0B"></span>8B0B</td>
<td class="instruction">LD (<a href="89AE.html">string_length</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B0E"></span>8B0E</td>
<td class="instruction">LD HL,$0602</td>
<td class="comment-1" rowspan="4">Set <a href="89AC.html">POSPRI</a> to coordinates (2,6) and set ATTR-T to $45 (bright cyan on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B11"></span>8B11</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B14"></span>8B14</td>
<td class="instruction">LD A,$45</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B16"></span>8B16</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label">INPLOO</td>
<td class="address-2"><span id="8B19"></span>8B19</td>
<td class="instruction">CALL $02BF</td>
<td class="comment-1" rowspan="1">Call KEYBOARD in Spectrum ROM.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B1C"></span>8B1C</td>
<td class="instruction">LD (<a href="89AF.html">KEY_P</a>),A</td>
<td class="comment-1" rowspan="1">Store keypress in <a href="89AF.html">KEY_P</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B1F"></span>8B1F</td>
<td class="instruction">CP $0D</td>
<td class="comment-1" rowspan="2">If key is 'enter' jump to <a href="89F9.html#8B95">ENTER</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B21"></span>8B21</td>
<td class="instruction">JP Z,<a href="89F9.html#8B95">ENTER</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B24"></span>8B24</td>
<td class="instruction">CP $0C</td>
<td class="comment-1" rowspan="2">If key is not 'delete' jump to <a href="89F9.html#8B56">NO_DEL</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B26"></span>8B26</td>
<td class="instruction">JR NZ,<a href="89F9.html#8B56">NO_DEL</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B28"></span>8B28</td>
<td class="instruction">LD A,(<a href="89AE.html">string_length</a>)</td>
<td class="comment-1" rowspan="3">If <a href="89AE.html">string_length</a> is zero jump back to <a href="89F9.html#8B19">INPLOO</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B2B"></span>8B2B</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B2C"></span>8B2C</td>
<td class="instruction">JR Z,<a href="89F9.html#8B19">INPLOO</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B2E"></span>8B2E</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="2">Load <a href="89AC.html">POSPRI</a> into BC and decrement (move cursor left over letter to delete).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B32"></span>8B32</td>
<td class="instruction">DEC BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B33"></span>8B33</td>
<td class="instruction">LD A,$20</td>
<td class="comment-1" rowspan="2">Print space character to blank out letter under cursor.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B35"></span>8B35</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B38"></span>8B38</td>
<td class="instruction">LD HL,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="3">Decrement <a href="89AC.html">POSPRI</a> again ready for next letter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B3B"></span>8B3B</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B3C"></span>8B3C</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B3F"></span>8B3F</td>
<td class="instruction">LD HL,<a href="89AE.html">string_length</a></td>
<td class="comment-1" rowspan="2">Decrement <a href="89AE.html">string_length</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B42"></span>8B42</td>
<td class="instruction">DEC (HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B43"></span>8B43</td>
<td class="instruction">LD HL,(<a href="89AA.html">player_name_string</a>)</td>
<td class="comment-1" rowspan="3">Decrement <a href="89AA.html">player_name_string</a> pointer (move back over last character).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B46"></span>8B46</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B47"></span>8B47</td>
<td class="instruction">LD (<a href="89AA.html">player_name_string</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B4A"></span>8B4A</td>
<td class="instruction">LD HL,<a href="89EF.html">S60</a></td>
<td class="comment-1" rowspan="2">Play key bloop sound effect.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B4D"></span>8B4D</td>
<td class="instruction">CALL <a href="C2F6.html#C2F9">play_sound_effect_in_HL</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B50"></span>8B50</td>
<td class="instruction">CALL <a href="96E6.html">PAUSER</a></td>
<td class="comment-1" rowspan="2">Pause for approximately 0.15 seconds then jump back to <a href="89F9.html#8B19">INPLOO</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B53"></span>8B53</td>
<td class="instruction">JP <a href="89F9.html#8B19">INPLOO</a></td>
</tr>
<tr>
<td class="asm-label">NO_DEL</td>
<td class="address-2"><span id="8B56"></span>8B56</td>
<td class="instruction">LD A,(<a href="89AE.html">string_length</a>)</td>
<td class="comment-1" rowspan="3">If string length equals 11 jump back to <a href="89F9.html#8B19">INPLOO</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B59"></span>8B59</td>
<td class="instruction">CP $0B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B5B"></span>8B5B</td>
<td class="instruction">JP Z,<a href="89F9.html#8B19">INPLOO</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B5E"></span>8B5E</td>
<td class="instruction">LD A,(<a href="89AF.html">KEY_P</a>)</td>
<td class="comment-1" rowspan="3">If <a href="89AF.html">KEY_P</a> is 'space' jump to <a href="89F9.html#8B6F">SPACE</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B61"></span>8B61</td>
<td class="instruction">CP $20</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B63"></span>8B63</td>
<td class="instruction">JR Z,<a href="89F9.html#8B6F">SPACE</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B65"></span>8B65</td>
<td class="instruction">CP $41</td>
<td class="comment-1" rowspan="4">If <a href="89AF.html">KEY_P</a> is less than 'A' or greater than 'z' jump back to <a href="89F9.html#8B19">INPLOO</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B67"></span>8B67</td>
<td class="instruction">JP M,<a href="89F9.html#8B19">INPLOO</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B6A"></span>8B6A</td>
<td class="instruction">CP $7B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B6C"></span>8B6C</td>
<td class="instruction">JP P,<a href="89F9.html#8B19">INPLOO</a></td>
</tr>
<tr>
<td class="asm-label">SPACE</td>
<td class="address-2"><span id="8B6F"></span>8B6F</td>
<td class="instruction">LD HL,(<a href="89AA.html">player_name_string</a>)</td>
<td class="comment-1" rowspan="2">Store space character at the position given by the <a href="89AA.html">player_name_string</a> pointer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B72"></span>8B72</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B73"></span>8B73</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Advance the <a href="89AA.html">player_name_string</a> pointer and store.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B74"></span>8B74</td>
<td class="instruction">LD (<a href="89AA.html">player_name_string</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B77"></span>8B77</td>
<td class="instruction">LD HL,<a href="89AE.html">string_length</a></td>
<td class="comment-1" rowspan="2">Increment <a href="89AE.html">string_length</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B7A"></span>8B7A</td>
<td class="instruction">INC (HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B7B"></span>8B7B</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="2">Load <a href="89AC.html">POSPRI</a> into BC and call <a href="BAD6.html">DH_P</a> to print character still in A (space) at those coordinates.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B7F"></span>8B7F</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B82"></span>8B82</td>
<td class="instruction">LD HL,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="3">Increment <a href="89AC.html">POSPRI</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B85"></span>8B85</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B86"></span>8B86</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B89"></span>8B89</td>
<td class="instruction">LD HL,<a href="89EF.html">S60</a></td>
<td class="comment-1" rowspan="2">Play key bloop sound effect.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B8C"></span>8B8C</td>
<td class="instruction">CALL <a href="C2F6.html#C2F9">play_sound_effect_in_HL</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B8F"></span>8B8F</td>
<td class="instruction">CALL <a href="907B.html">NKEY2</a></td>
<td class="comment-1" rowspan="2">Append 4 semi-random bytes to <a href="D3F2.html">INBUF</a> then jump back to <a href="89F9.html#8B19">INPLOO</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B92"></span>8B92</td>
<td class="instruction">JP <a href="89F9.html#8B19">INPLOO</a></td>
</tr>
<tr>
<td class="asm-label">ENTER</td>
<td class="address-2"><span id="8B95"></span>8B95</td>
<td class="instruction">LD A,(<a href="89AE.html">string_length</a>)</td>
<td class="comment-1" rowspan="3">Read string length into A. If zero jump back to <a href="89F9.html#8B19">INPLOO</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B98"></span>8B98</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B99"></span>8B99</td>
<td class="instruction">JP Z,<a href="89F9.html#8B19">INPLOO</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B9C"></span>8B9C</td>
<td class="instruction">LD H,$00</td>
<td class="comment-1" rowspan="4">Set HL = <a href="AC0E.html">current_player</a> + $29.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8B9E"></span>8B9E</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BA1"></span>8BA1</td>
<td class="instruction">ADD A,$29</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BA3"></span>8BA3</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BA4"></span>8BA4</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="2">Multiply result by four.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BA5"></span>8BA5</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BA6"></span>8BA6</td>
<td class="instruction">LD DE,<a href="CDD3.html">game_messages_1</a></td>
<td class="comment-1" rowspan="2">Add result to address of <a href="CDD3.html">game messages table 1</a> to point at offset to relevant wizard data.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BA9"></span>8BA9</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BAA"></span>8BAA</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Move past address word in table to wizard name length.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BAB"></span>8BAB</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BAC"></span>8BAC</td>
<td class="instruction">LD A,(<a href="89AE.html">string_length</a>)</td>
<td class="comment-1" rowspan="2">Read <a href="89AE.html">string_length</a> variable again and write into table.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BAF"></span>8BAF</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BB0"></span>8BB0</td>
<td class="instruction">CALL <a href="907B.html">NKEY2</a></td>
<td class="comment-1" rowspan="1">Append 4 semi-random bytes to <a href="D3F2.html">INBUF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BB3"></span>8BB3</td>
<td class="instruction">LD BC,$0902</td>
<td class="comment-1" rowspan="5">Set ATTR-T to $43 (bright magenta on black) and print message <a href="8859.html#88AD">M_6</a> at coordinates (2,9).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BB6"></span>8BB6</td>
<td class="instruction">LD A,$43</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BB8"></span>8BB8</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BBB"></span>8BBB</td>
<td class="instruction">LD A,$05</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BBD"></span>8BBD</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BC0"></span>8BC0</td>
<td class="instruction">LD A,$46</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $46 (bright yellow on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BC2"></span>8BC2</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BC5"></span>8BC5</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Clear <a href="AC2E.html">computer_player_flag</a> (current player is human).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BC7"></span>8BC7</td>
<td class="instruction">LD (<a href="AC2E.html">computer_player_flag</a>),A</td>
</tr>
<tr>
<td class="asm-label">Y_OR_N</td>
<td class="address-2"><span id="8BCA"></span>8BCA</td>
<td class="instruction">CALL $02BF</td>
<td class="comment-1" rowspan="1">Call KEYBOARD in Spectrum ROM.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BCD"></span>8BCD</td>
<td class="instruction">CP $59</td>
<td class="comment-1" rowspan="2">If keypress is 'Y' jump to <a href="89F9.html#8BDF">YES_CC</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BCF"></span>8BCF</td>
<td class="instruction">JR Z,<a href="89F9.html#8BDF">YES_CC</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BD1"></span>8BD1</td>
<td class="instruction">CP $4E</td>
<td class="comment-1" rowspan="2">If keypress is not 'N' jump back to <a href="89F9.html#8BCA">Y_OR_N</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BD3"></span>8BD3</td>
<td class="instruction">JR NZ,<a href="89F9.html#8BCA">Y_OR_N</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BD5"></span>8BD5</td>
<td class="instruction">LD BC,$0917</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#88C5">M_8</a> at coordinates (23,9).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BD8"></span>8BD8</td>
<td class="instruction">LD A,$07</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BDA"></span>8BDA</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BDD"></span>8BDD</td>
<td class="instruction">JR <a href="89F9.html#8BF8">NOT_CC</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="89F9.html#8BF8">NOT_CC</a>.</td>
</tr>
<tr>
<td class="asm-label">YES_CC</td>
<td class="address-2"><span id="8BDF"></span>8BDF</td>
<td class="instruction">LD BC,$0917</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#88C7">M_9</a> at 23,9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BE2"></span>8BE2</td>
<td class="instruction">LD A,$06</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BE4"></span>8BE4</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BE7"></span>8BE7</td>
<td class="instruction">LD HL,<a href="AC26.html">WIZCON</a></td>
<td class="comment-1" rowspan="5">Set HL to <a href="AC26.html">WIZCON</a> + <a href="AC0E.html">current_player</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BEA"></span>8BEA</td>
<td class="instruction">LD D,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BEC"></span>8BEC</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BEF"></span>8BEF</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BF0"></span>8BF0</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BF1"></span>8BF1</td>
<td class="instruction">LD (HL),$01</td>
<td class="comment-1" rowspan="1">Write $01 to <a href="AC26.html">WIZCON</a> + <a href="AC0E.html">current_player</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BF3"></span>8BF3</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Set <a href="AC2E.html">computer_player_flag</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BF5"></span>8BF5</td>
<td class="instruction">LD (<a href="AC2E.html">computer_player_flag</a>),A</td>
</tr>
<tr>
<td class="asm-label">NOT_CC</td>
<td class="address-2"><span id="8BF8"></span>8BF8</td>
<td class="instruction">LD HL,<a href="89EF.html">S60</a></td>
<td class="comment-1" rowspan="2">Play key bloop sound effect.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BFB"></span>8BFB</td>
<td class="instruction">CALL <a href="C2F6.html#C2F9">play_sound_effect_in_HL</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8BFE"></span>8BFE</td>
<td class="instruction">CALL <a href="907B.html">NKEY2</a></td>
<td class="comment-1" rowspan="1">Append 4 semi-random bytes to <a href="D3F2.html">INBUF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C01"></span>8C01</td>
<td class="instruction">LD BC,$0B02</td>
<td class="comment-1" rowspan="5">Set ATTR-T to $43 (bright magenta on black) and print message <a href="8859.html#891A">M_13</a> at coordinates (2,11).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C04"></span>8C04</td>
<td class="instruction">LD A,$43</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C06"></span>8C06</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C09"></span>8C09</td>
<td class="instruction">LD A,$0C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C0B"></span>8C0B</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C0E"></span>8C0E</td>
<td class="instruction">LD A,$45</td>
<td class="comment-1" rowspan="5">Set ATTR-T to $45 (bright cyan on black) and print message <a href="8859.html#892B">M_14</a> at coordinates (2,13).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C10"></span>8C10</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C13"></span>8C13</td>
<td class="instruction">LD BC,$0D02</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C16"></span>8C16</td>
<td class="instruction">LD A,$0D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C18"></span>8C18</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C1B"></span>8C1B</td>
<td class="instruction">LD BC,$0D03</td>
<td class="comment-1" rowspan="2">Set <a href="89AC.html">POSPRI</a> to coordinates (3,13).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C1E"></span>8C1E</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C22"></span>8C22</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Set <a href="89A8.html">NUM</a> to zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C24"></span>8C24</td>
<td class="instruction">LD (<a href="89A8.html">NUM</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C27"></span>8C27</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1">Set B to eight as a loop counter.</td>
</tr>
<tr>
<td class="asm-label">P_WIZL</td>
<td class="address-2"><span id="8C29"></span>8C29</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Preserve the loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C2A"></span>8C2A</td>
<td class="instruction">LD A,(<a href="89A8.html">NUM</a>)</td>
<td class="comment-1" rowspan="2">Copy <a href="89A8.html">NUM</a> to <a href="90DF.html">ROMP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C2D"></span>8C2D</td>
<td class="instruction">LD (<a href="90DF.html">ROMP</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C30"></span>8C30</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="2">Increment <a href="89A8.html">NUM</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C31"></span>8C31</td>
<td class="instruction">LD (<a href="89A8.html">NUM</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C34"></span>8C34</td>
<td class="instruction">CALL <a href="90F0.html">PR_CHR</a></td>
<td class="comment-1" rowspan="1">Call <a href="90F0.html">PR_CHR</a> (print character sprite).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C37"></span>8C37</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="5">Add three to <a href="89AC.html">POSPRI</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C3B"></span>8C3B</td>
<td class="instruction">INC BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C3C"></span>8C3C</td>
<td class="instruction">INC BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C3D"></span>8C3D</td>
<td class="instruction">INC BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C3E"></span>8C3E</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C42"></span>8C42</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C43"></span>8C43</td>
<td class="instruction">DJNZ <a href="89F9.html#8C29">P_WIZL</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8C29">P_WIZL</a> for eight iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C45"></span>8C45</td>
<td class="instruction">LD BC,$0B13</td>
<td class="comment-1" rowspan="2">Call <a href="89B0.html">CHONUM</a> with coordinates (19,11).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C48"></span>8C48</td>
<td class="instruction">CALL <a href="89B0.html">CHONUM</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C4B"></span>8C4B</td>
<td class="instruction">LD (<a href="90DF.html">ROMP</a>),A</td>
<td class="comment-1" rowspan="1">Store number returned in <a href="90DF.html">ROMP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C4E"></span>8C4E</td>
<td class="instruction">LD BC,$0B14</td>
<td class="comment-1" rowspan="3">Set <a href="89AC.html">POSPRI</a> to coordinates (20,11) and call <a href="90F0.html">PR_CHR</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C51"></span>8C51</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C55"></span>8C55</td>
<td class="instruction">CALL <a href="90F0.html">PR_CHR</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C58"></span>8C58</td>
<td class="instruction">LD HL,<a href="82C0.html">character_1_sprite_pointers</a></td>
<td class="comment-1" rowspan="1">Set HL to unknown data block at <a href="82C0.html">character_1_sprite_pointers</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C5B"></span>8C5B</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="7">Multiply <a href="90DF.html">ROMP</a> by eight and add to <a href="82C0.html">character_1_sprite_pointers</a> to give address of pointer to sprite data for selected character.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C5D"></span>8C5D</td>
<td class="instruction">LD A,(<a href="90DF.html">ROMP</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C60"></span>8C60</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C62"></span>8C62</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C64"></span>8C64</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C66"></span>8C66</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C67"></span>8C67</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C68"></span>8C68</td>
<td class="instruction">LD (<a href="831F.html">current_character_pointer</a>),HL</td>
<td class="comment-1" rowspan="1">Store result at address in <a href="831F.html">current_character_pointer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C6B"></span>8C6B</td>
<td class="instruction">CALL <a href="8324.html">routine02</a></td>
<td class="comment-1" rowspan="1">Copy pointers to sprite data of chosen character to wizard object data for current player.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C6E"></span>8C6E</td>
<td class="instruction">LD A,$43</td>
<td class="comment-1" rowspan="5">Set ATTR-T to $43 (bright magenta on black) and print message <a href="8859.html#890C">M_12</a> at coordinates (2,16).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C70"></span>8C70</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C73"></span>8C73</td>
<td class="instruction">LD BC,$1002</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C76"></span>8C76</td>
<td class="instruction">LD A,$0B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C78"></span>8C78</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C7B"></span>8C7B</td>
<td class="instruction">LD A,$46</td>
<td class="comment-1" rowspan="5">Set ATTR-T to $46 (bright yellow on black) and print message <a href="8859.html#892B">M_14</a> at coordinates (2,18).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C7D"></span>8C7D</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C80"></span>8C80</td>
<td class="instruction">LD BC,$1202</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C83"></span>8C83</td>
<td class="instruction">LD A,$0D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C85"></span>8C85</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C88"></span>8C88</td>
<td class="instruction">LD BC,$1203</td>
<td class="comment-1" rowspan="2">Set <a href="89AC.html">POSPRI</a> to coordinates (3,18).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C8B"></span>8C8B</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C8F"></span>8C8F</td>
<td class="instruction">LD HL,<a href="90D7.html">ATTAB</a></td>
<td class="comment-1" rowspan="2">Set <a href="8321.html">temp_pointer</a> to address of <a href="90D7.html">ATTAB</a> (attribute table).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C92"></span>8C92</td>
<td class="instruction">LD (<a href="8321.html">temp_pointer</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C95"></span>8C95</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1">Set B to eight as loop counter.</td>
</tr>
<tr>
<td class="asm-label">COLOO</td>
<td class="address-2"><span id="8C97"></span>8C97</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Preserve the loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C98"></span>8C98</td>
<td class="instruction">LD HL,(<a href="8321.html">temp_pointer</a>)</td>
<td class="comment-1" rowspan="2">Read byte from address held in <a href="8321.html">temp_pointer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C9B"></span>8C9B</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C9C"></span>8C9C</td>
<td class="instruction">LD ($5C8F),A</td>
<td class="comment-1" rowspan="1">Store in ATTR-T.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8C9F"></span>8C9F</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Increment HL and store back in <a href="8321.html">temp_pointer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CA0"></span>8CA0</td>
<td class="instruction">LD (<a href="8321.html">temp_pointer</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CA3"></span>8CA3</td>
<td class="instruction">CALL <a href="90F0.html">PR_CHR</a></td>
<td class="comment-1" rowspan="1">Print character sprite.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CA6"></span>8CA6</td>
<td class="instruction">LD HL,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="4">Add three to <a href="89AC.html">POSPRI</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CA9"></span>8CA9</td>
<td class="instruction">LD DE,$0003</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CAC"></span>8CAC</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CAD"></span>8CAD</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CB0"></span>8CB0</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore loop counter from stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CB1"></span>8CB1</td>
<td class="instruction">DJNZ <a href="89F9.html#8C97">COLOO</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8C97">COLOO</a> for eight iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CB3"></span>8CB3</td>
<td class="instruction">LD BC,$1010</td>
<td class="comment-1" rowspan="2">Set coordinates to (16,16) and get number input from 1 to 8. This also appends 4 semi-random bytes to <a href="D3F2.html">INBUF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CB6"></span>8CB6</td>
<td class="instruction">CALL <a href="89B0.html">CHONUM</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CB9"></span>8CB9</td>
<td class="instruction">LD HL,<a href="90D7.html">ATTAB</a></td>
<td class="comment-1" rowspan="4">Add number returned to address of <a href="90D7.html">ATTAB</a> giving address of byte in attribute table corresponding to chosen colour.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CBC"></span>8CBC</td>
<td class="instruction">LD D,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CBE"></span>8CBE</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CBF"></span>8CBF</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CC0"></span>8CC0</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="2">Read attribute byte from attribute table and set ATTR-T.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CC1"></span>8CC1</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CC4"></span>8CC4</td>
<td class="instruction">LD BC,$1011</td>
<td class="comment-1" rowspan="3">Set <a href="89AC.html">POSPRI</a> to coordinates (17,16) and print character sprite.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CC7"></span>8CC7</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CCB"></span>8CCB</td>
<td class="instruction">CALL <a href="90F0.html">PR_CHR</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CCE"></span>8CCE</td>
<td class="instruction">CALL <a href="8300.html">get_wizard_object</a></td>
<td class="comment-1" rowspan="1">Get address of first sprite pointer in wizard object data of the current player).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CD1"></span>8CD1</td>
<td class="instruction">LD HL,(<a href="8321.html">temp_pointer</a>)</td>
<td class="comment-1" rowspan="2">load address of first sprite pointer in wizard object data from <a href="8321.html">temp_pointer</a> into HL and decrement (HL = address of first sprite pointer - 1).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CD4"></span>8CD4</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CD5"></span>8CD5</td>
<td class="instruction">LD DE,$0003</td>
<td class="comment-1" rowspan="1">Set DE to three.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CD8"></span>8CD8</td>
<td class="instruction">LD A,($5C8F)</td>
<td class="comment-1" rowspan="1">Read ATTR-T onto A.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CDB"></span>8CDB</td>
<td class="instruction">LD B,$04</td>
<td class="comment-1" rowspan="1">Set B to four as a loop counter.</td>
</tr>
<tr>
<td class="asm-label">PUTATL</td>
<td class="address-2"><span id="8CDD"></span>8CDD</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1">Add three to HL to point at next attribute byte in wizard data.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CDE"></span>8CDE</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write attribute byte to wizard data.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CDF"></span>8CDF</td>
<td class="instruction">DJNZ <a href="89F9.html#8CDD">PUTATL</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8CDD">PUTATL</a> for four iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CE1"></span>8CE1</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Set <a href="9049.html">COMPAR</a> to zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CE3"></span>8CE3</td>
<td class="instruction">LD (<a href="9049.html">COMPAR</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CE6"></span>8CE6</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-1" rowspan="3">If player is human then jump to <a href="89F9.html#8CF2">MAKCHR</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CE9"></span>8CE9</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CEA"></span>8CEA</td>
<td class="instruction">JR Z,<a href="89F9.html#8CF2">MAKCHR</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CEC"></span>8CEC</td>
<td class="instruction">LD A,(<a href="89A7.html">LEVEL</a>)</td>
<td class="comment-1" rowspan="2">Else copy <a href="89A7.html">LEVEL</a> to <a href="9049.html">COMPAR</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CEF"></span>8CEF</td>
<td class="instruction">LD (<a href="9049.html">COMPAR</a>),A</td>
</tr>
<tr>
<td class="asm-label">MAKCHR</td>
<td class="address-2"><span id="8CF2"></span>8CF2</td>
<td class="instruction">CALL <a href="8300.html">get_wizard_object</a></td>
<td class="comment-1" rowspan="1">Get address of first sprite pointer in wizard object data of the current player.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CF5"></span>8CF5</td>
<td class="instruction">LD HL,(<a href="89AA.html">player_name_string</a>)</td>
<td class="comment-1" rowspan="1">Read <a href="89AA.html">player_name_string</a> into HL.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CF8"></span>8CF8</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="3">Move past player name string to player stats.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CFA"></span>8CFA</td>
<td class="instruction">LD E,$0D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CFC"></span>8CFC</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8CFD"></span>8CFD</td>
<td class="instruction">CALL <a href="904B.html">RANDY</a></td>
<td class="comment-1" rowspan="1">Get a random number in the range 0-9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D00"></span>8D00</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="2">Halve it and add 1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D02"></span>8D02</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D03"></span>8D03</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="4">Add <a href="9049.html">COMPAR</a> divided by 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D04"></span>8D04</td>
<td class="instruction">LD A,(<a href="9049.html">COMPAR</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D07"></span>8D07</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D09"></span>8D09</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D0A"></span>8D0A</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Store calculated value in first byte of wizard stats (combat).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D0B"></span>8D0B</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="4">Set second and third bytes of wizard stats to zero (ranged combat and range).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D0C"></span>8D0C</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D0E"></span>8D0E</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D0F"></span>8D0F</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D11"></span>8D11</td>
<td class="instruction">CALL <a href="904B.html">RANDY</a></td>
<td class="comment-1" rowspan="1">Get a random number in the range 0-9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D14"></span>8D14</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="2">Halve it and add 1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D16"></span>8D16</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D17"></span>8D17</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="4">Add <a href="9049.html">COMPAR</a> divided by 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D18"></span>8D18</td>
<td class="instruction">LD A,(<a href="9049.html">COMPAR</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D1B"></span>8D1B</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D1D"></span>8D1D</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D1E"></span>8D1E</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Store in fourth byte of wizard stats (defence).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D1F"></span>8D1F</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D20"></span>8D20</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Set fifth byte of wizard stats to 1 (movement allowance).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D21"></span>8D21</td>
<td class="instruction">LD (HL),$01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D23"></span>8D23</td>
<td class="instruction">CALL <a href="904B.html">RANDY</a></td>
<td class="comment-1" rowspan="1">Get a random number in the range 0-9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D26"></span>8D26</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="2">Halve it and add 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D28"></span>8D28</td>
<td class="instruction">ADD A,$03</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D2A"></span>8D2A</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="5">Add <a href="9049.html">COMPAR</a> divided by 4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D2B"></span>8D2B</td>
<td class="instruction">LD A,(<a href="9049.html">COMPAR</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D2E"></span>8D2E</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D30"></span>8D30</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D32"></span>8D32</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D33"></span>8D33</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Store in sixth byte of wizard stats (manoeuvre rating).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D34"></span>8D34</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D35"></span>8D35</td>
<td class="instruction">CALL <a href="904B.html">RANDY</a></td>
<td class="comment-1" rowspan="1">Get a random number in the range 0-9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D38"></span>8D38</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="3">Divide it by 4 and add 6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D3A"></span>8D3A</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D3C"></span>8D3C</td>
<td class="instruction">ADD A,$06</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D3E"></span>8D3E</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Store in seventh byte of wizard stats (magic resistance).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D3F"></span>8D3F</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D40"></span>8D40</td>
<td class="instruction">CALL <a href="904B.html">RANDY</a></td>
<td class="comment-1" rowspan="1">Get a random number in the range 0-9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D43"></span>8D43</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="2">Halve it and add 11.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D45"></span>8D45</td>
<td class="instruction">ADD A,$0B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D47"></span>8D47</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="3">Add <a href="9049.html">COMPAR</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D48"></span>8D48</td>
<td class="instruction">LD A,(<a href="9049.html">COMPAR</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D4B"></span>8D4B</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D4C"></span>8D4C</td>
<td class="instruction">CP $15</td>
<td class="comment-1" rowspan="3">Cap the value at 20.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D4E"></span>8D4E</td>
<td class="instruction">JP M,<a href="89F9.html#8D53">NOTMOR</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D51"></span>8D51</td>
<td class="instruction">LD A,$14</td>
</tr>
<tr>
<td class="asm-label">NOTMOR</td>
<td class="address-2"><span id="8D53"></span>8D53</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="3">Store value in <a href="904A.html">SPELNO</a> and in eighth byte of wizard stats (spells).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D54"></span>8D54</td>
<td class="instruction">LD (<a href="904A.html">SPELNO</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D57"></span>8D57</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D58"></span>8D58</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Set ninth byte in wizard stats to zero (ability).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D59"></span>8D59</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D5B"></span>8D5B</td>
<td class="instruction">LD A,(<a href="9049.html">COMPAR</a>)</td>
<td class="comment-1" rowspan="5">Halve <a href="9049.html">COMPAR</a> and subtract from 5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D5E"></span>8D5E</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D60"></span>8D60</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D61"></span>8D61</td>
<td class="instruction">LD A,$05</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D63"></span>8D63</td>
<td class="instruction">SUB E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D64"></span>8D64</td>
<td class="instruction">LD (<a href="A172.html">STRENG</a>),A</td>
<td class="comment-1" rowspan="1">Store result in <a href="A172.html">STRENG</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D67"></span>8D67</td>
<td class="instruction">CALL <a href="904B.html">RANDY</a></td>
<td class="comment-1" rowspan="1">Get a random number in the range 0-9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D6A"></span>8D6A</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="4">If less than <a href="A172.html">STRENG</a> jump to <a href="89F9.html#8D7A">NOABIL</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D6B"></span>8D6B</td>
<td class="instruction">LD A,(<a href="A172.html">STRENG</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D6E"></span>8D6E</td>
<td class="instruction">CP E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D6F"></span>8D6F</td>
<td class="instruction">JP P,<a href="89F9.html#8D7A">NOABIL</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D72"></span>8D72</td>
<td class="instruction">CALL <a href="904B.html">RANDY</a></td>
<td class="comment-1" rowspan="1">Get a random number in the range 0-9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D75"></span>8D75</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="3">Halve it and store in ninth byte of wizard stats (ability).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D77"></span>8D77</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D79"></span>8D79</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label">NOABIL</td>
<td class="address-2"><span id="8D7A"></span>8D7A</td>
<td class="instruction">CALL <a href="92AA.html">GETHIS</a></td>
<td class="comment-1" rowspan="1">Get address of current player's first spell in <a href="7F47.html">possesssed_spell_tables</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D7D"></span>8D7D</td>
<td class="instruction">LD HL,(<a href="9154.html">HISPEL</a>)</td>
<td class="comment-1" rowspan="3">Decrement <a href="9154.html">HISPEL</a> to first byte in wizard's spells ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D80"></span>8D80</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D81"></span>8D81</td>
<td class="instruction">LD (<a href="9154.html">HISPEL</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D84"></span>8D84</td>
<td class="instruction">CALL <a href="904B.html">RANDY</a></td>
<td class="comment-1" rowspan="1">Get a random number in the range 0-9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D87"></span>8D87</td>
<td class="instruction">ADD A,$0C</td>
<td class="comment-1" rowspan="3">Add 12 to value and store at address in <a href="9154.html">HISPEL</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D89"></span>8D89</td>
<td class="instruction">LD HL,(<a href="9154.html">HISPEL</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D8C"></span>8D8C</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D8D"></span>8D8D</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Set first spell to $01 (disbelieve).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D8E"></span>8D8E</td>
<td class="instruction">LD (HL),$01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D90"></span>8D90</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Set <a href="9154.html">HISPEL</a> to next address.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D91"></span>8D91</td>
<td class="instruction">LD (<a href="9154.html">HISPEL</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D94"></span>8D94</td>
<td class="instruction">LD HL,<a href="D3F2.html">INBUF</a></td>
<td class="comment-1" rowspan="2">Reset <a href="CD86.html">BUFPNT</a> to beginning of <a href="D3F2.html">INBUF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D97"></span>8D97</td>
<td class="instruction">LD (<a href="CD86.html">BUFPNT</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D9A"></span>8D9A</td>
<td class="instruction">LD A,(<a href="904A.html">SPELNO</a>)</td>
<td class="comment-1" rowspan="2">Set B to <a href="904A.html">SPELNO</a> as loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8D9D"></span>8D9D</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="asm-label">INSPLO</td>
<td class="address-2"><span id="8D9E"></span>8D9E</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Preserve BC.</td>
</tr>
<tr>
<td class="asm-label">RIND</td>
<td class="address-2"><span id="8D9F"></span>8D9F</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="1">Copy R register into A.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DA1"></span>8DA1</td>
<td class="instruction">AND $07</td>
<td class="comment-1" rowspan="1">Select lowest three bits.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DA3"></span>8DA3</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1">Copy to H.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DA4"></span>8DA4</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="2">Get R register into L.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DA6"></span>8DA6</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DA7"></span>8DA7</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">Read byte from a semi-random address in first 2kB of ROM.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DA8"></span>8DA8</td>
<td class="instruction">LD HL,(<a href="CD86.html">BUFPNT</a>)</td>
<td class="comment-1" rowspan="2">Add semi-random byte from address in <a href="CD86.html">BUFPNT</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DAB"></span>8DAB</td>
<td class="instruction">ADD A,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DAC"></span>8DAC</td>
<td class="instruction">AND $3F</td>
<td class="comment-1" rowspan="1">Select lowest 6 bits.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DAE"></span>8DAE</td>
<td class="instruction">CP $02</td>
<td class="comment-1" rowspan="4">Jump back to <a href="89F9.html#8D9F">RIND</a> unless value in the range $02 to $41. This selects any valid spell number excluding disbelieve. The preceding mask also <a href="https://zxnet.co.uk/spectrum/chaos/reference/facts.html#turmoil_spell">excludes spells $40 and $41 (turmoil)</a> rendering the upper range check unnecessary.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DB0"></span>8DB0</td>
<td class="instruction">JP M,<a href="89F9.html#8D9F">RIND</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DB3"></span>8DB3</td>
<td class="instruction">CP $42</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DB5"></span>8DB5</td>
<td class="instruction">JP P,<a href="89F9.html#8D9F">RIND</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DB8"></span>8DB8</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Increment <a href="CD86.html">BUFPNT</a> to next semi-random byte.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DB9"></span>8DB9</td>
<td class="instruction">LD (<a href="CD86.html">BUFPNT</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DBC"></span>8DBC</td>
<td class="instruction">LD (<a href="937B.html">CURSP</a>),A</td>
<td class="comment-1" rowspan="1">Store spell number in <a href="937B.html">CURSP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DBF"></span>8DBF</td>
<td class="instruction">CALL <a href="92F9.html">CHAN_C</a></td>
<td class="comment-1" rowspan="1">Get address of spell table entry in IX.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DC2"></span>8DC2</td>
<td class="instruction">LD A,(IX+$04)</td>
<td class="comment-1" rowspan="1">Read fourth byte from spell entry ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DC5"></span>8DC5</td>
<td class="instruction">LD HL,(<a href="9154.html">HISPEL</a>)</td>
<td class="comment-1" rowspan="2">Store at address in <a href="9154.html">HISPEL</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DC8"></span>8DC8</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DC9"></span>8DC9</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="3">Increment address and copy <a href="937B.html">CURSP</a> there.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DCA"></span>8DCA</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DCD"></span>8DCD</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DCE"></span>8DCE</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Increment address and <a href="9154.html">HISPEL</a> pointer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DCF"></span>8DCF</td>
<td class="instruction">LD (<a href="9154.html">HISPEL</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DD2"></span>8DD2</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DD3"></span>8DD3</td>
<td class="instruction">DJNZ <a href="89F9.html#8D9E">INSPLO</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8D9E">INSPLO</a> for <a href="904A.html">SPELNO</a> iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DD5"></span>8DD5</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-1" rowspan="3">If player is human, jump to <a href="89F9.html#8E08">DONSOR</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DD8"></span>8DD8</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DD9"></span>8DD9</td>
<td class="instruction">JR Z,<a href="89F9.html#8E08">DONSOR</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DDB"></span>8DDB</td>
<td class="instruction">CALL <a href="92AA.html">GETHIS</a></td>
<td class="comment-1" rowspan="1">Get address of spells for current player.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DDE"></span>8DDE</td>
<td class="instruction">LD HL,(<a href="9154.html">HISPEL</a>)</td>
<td class="comment-1" rowspan="1">Set HL to address of wizard's first spell number.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DE1"></span>8DE1</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrement to address of first entry in possessed spell table.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DE2"></span>8DE2</td>
<td class="instruction">LD B,$13</td>
<td class="comment-1" rowspan="1">Set B to 19 as outer loop counter.</td>
</tr>
<tr>
<td class="asm-label">OUTL_</td>
<td class="address-2"><span id="8DE4"></span>8DE4</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Preserve outer loop counter and address in possessed spell table.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DE5"></span>8DE5</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DE6"></span>8DE6</td>
<td class="instruction">LD B,$13</td>
<td class="comment-1" rowspan="1">Set B to 19 as inner loop counter.</td>
</tr>
<tr>
<td class="asm-label">INL_</td>
<td class="address-2"><span id="8DE8"></span>8DE8</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Preserve inner loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DE9"></span>8DE9</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="4">Read ??? and spell number from entry address in HL into E and D.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DEA"></span>8DEA</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DEB"></span>8DEB</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DEC"></span>8DEC</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DED"></span>8DED</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="3">Move forward and read next entry into C and B.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DEE"></span>8DEE</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DEF"></span>8DEF</td>
<td class="instruction">LD B,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DF0"></span>8DF0</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Move pointer back to the ??? of the second entry.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DF1"></span>8DF1</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="4">If first ??? is not greater than or equal to second ??? jump to <a href="89F9.html#8E01">NOBIGA</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DF2"></span>8DF2</td>
<td class="instruction">CP E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DF3"></span>8DF3</td>
<td class="instruction">JR Z,<a href="89F9.html#8E01">NOBIGA</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DF5"></span>8DF5</td>
<td class="instruction">JR C,<a href="89F9.html#8E01">NOBIGA</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DF7"></span>8DF7</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="8">Else swap table entries.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DF8"></span>8DF8</td>
<td class="instruction">LD (HL),D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DF9"></span>8DF9</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DFA"></span>8DFA</td>
<td class="instruction">LD (HL),E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DFB"></span>8DFB</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DFC"></span>8DFC</td>
<td class="instruction">LD (HL),B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DFD"></span>8DFD</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DFE"></span>8DFE</td>
<td class="instruction">LD (HL),C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8DFF"></span>8DFF</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Move pointer back to ??? of the second entry.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E00"></span>8E00</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label">NOBIGA</td>
<td class="address-2"><span id="8E01"></span>8E01</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="2">Restore inner loop counter and loop back to <a href="89F9.html#8DE8">INL_</a> for 19 iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E02"></span>8E02</td>
<td class="instruction">DJNZ <a href="89F9.html#8DE8">INL_</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E04"></span>8E04</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="3">Restore address of first table entry and outer loop counter and loop back to <a href="89F9.html#8DE4">OUTL_</a> for 19 iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E05"></span>8E05</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E06"></span>8E06</td>
<td class="instruction">DJNZ <a href="89F9.html#8DE4">OUTL_</a></td>
</tr>
<tr>
<td class="asm-label">DONSOR</td>
<td class="address-2"><span id="8E08"></span>8E08</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
<td class="comment-1" rowspan="3">Increment <a href="AC0E.html">current_player</a> variable.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E0B"></span>8E0B</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E0C"></span>8E0C</td>
<td class="instruction">LD (<a href="AC0E.html">current_player</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E0F"></span>8E0F</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="3">Restore loop counter and jump back to <a href="89F9.html#8AD8">STALOO</a> for <a href="AC0F.html">NO_PLA</a> iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E10"></span>8E10</td>
<td class="instruction">DEC B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E11"></span>8E11</td>
<td class="instruction">JP NZ,<a href="89F9.html#8AD8">STALOO</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8E14"></span>
<div class="comments">
<div class="paragraph">
Next the program sets the starting position of each wizard which depends on the number of players.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E14"></span>8E14</td>
<td class="instruction">LD A,(<a href="AC0F.html">NO_PLA</a>)</td>
<td class="comment-1" rowspan="1">Read <a href="AC0F.html">NO_PLA</a> into A.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E17"></span>8E17</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="2">Subtract two.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E18"></span>8E18</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E19"></span>8E19</td>
<td class="instruction">SLA A</td>
<td class="comment-1" rowspan="3">Multiply by eight.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E1B"></span>8E1B</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E1D"></span>8E1D</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E1F"></span>8E1F</td>
<td class="instruction">LD HL,<a href="909F.html">STAPOS</a></td>
<td class="comment-1" rowspan="4">And add result to address of <a href="909F.html">STAPOS</a> get starting positions for selected number of players.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E22"></span>8E22</td>
<td class="instruction">LD D,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E24"></span>8E24</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E25"></span>8E25</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E26"></span>8E26</td>
<td class="instruction">LD (<a href="8321.html">temp_pointer</a>),HL</td>
<td class="comment-1" rowspan="1">Store this address in variable at <a href="8321.html">temp_pointer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E29"></span>8E29</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Set <a href="AC0E.html">current_player</a> variable to zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E2B"></span>8E2B</td>
<td class="instruction">LD (<a href="AC0E.html">current_player</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E2E"></span>8E2E</td>
<td class="instruction">LD A,(<a href="AC0F.html">NO_PLA</a>)</td>
<td class="comment-1" rowspan="2">Read <a href="AC0F.html">NO_PLA</a> into B as loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E31"></span>8E31</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="asm-label">PUTIBO</td>
<td class="address-2"><span id="8E32"></span>8E32</td>
<td class="instruction">LD HL,(<a href="8321.html">temp_pointer</a>)</td>
<td class="comment-1" rowspan="2">Read byte from address held in <a href="8321.html">temp_pointer</a> into A.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E35"></span>8E35</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E36"></span>8E36</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Increment address in temporary variable at <a href="8321.html">temp_pointer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E37"></span>8E37</td>
<td class="instruction">LD (<a href="8321.html">temp_pointer</a>),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E3A"></span>8E3A</td>
<td class="instruction">LD HL,<a href="E01F.html">map_object_table</a></td>
<td class="comment-1" rowspan="1">Set HL to <a href="E01F.html">map_object_table</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E3D"></span>8E3D</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="3">Calculate address in table by adding the value just read from current player offset in <a href="909F.html">STAPOS</a> table.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E3F"></span>8E3F</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E40"></span>8E40</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E41"></span>8E41</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
<td class="comment-1" rowspan="3">Add $29 to <a href="AC0E.html">current_player</a> to get object number of wizard and store at calculated address.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E44"></span>8E44</td>
<td class="instruction">ADD A,$29</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E46"></span>8E46</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E47"></span>8E47</td>
<td class="instruction">LD DE,$01E1</td>
<td class="comment-1" rowspan="4">Store <a href="AC0E.html">current_player</a> at corresponding entry in <a href="E200.html">map_object_properties_table</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E4A"></span>8E4A</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E4B"></span>8E4B</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E4E"></span>8E4E</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E4F"></span>8E4F</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="2">Increment <a href="AC0E.html">current_player</a> variable.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E50"></span>8E50</td>
<td class="instruction">LD (<a href="AC0E.html">current_player</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E53"></span>8E53</td>
<td class="instruction">DJNZ <a href="89F9.html#8E32">PUTIBO</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8E32">PUTIBO</a> for <a href="AC0F.html">NO_PLA</a> iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E55"></span>8E55</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Set <a href="7D03.html">unknown01</a> to zero ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E57"></span>8E57</td>
<td class="instruction">LD (<a href="7D03.html">unknown01</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E5A"></span>8E5A</td>
<td class="instruction">LD A,(<a href="AC0F.html">NO_PLA</a>)</td>
<td class="comment-1" rowspan="4">Read <a href="AC0F.html">NO_PLA</a> into A, double it, add 15 and copy the result to B as a loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E5D"></span>8E5D</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E5F"></span>8E5F</td>
<td class="instruction">ADD A,$0F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E61"></span>8E61</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8E62"></span>
<div class="comments">
<div class="paragraph">
This is the main game loop. A loop counter ends the game in a tie after a certain number of turns, which is the number of players multiplied by 2, plus 15.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">TURLOO</td>
<td class="address-2"><span id="8E62"></span>8E62</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Preserve loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E63"></span>8E63</td>
<td class="instruction">CALL <a href="9168.html">CAST_S</a></td>
<td class="comment-1" rowspan="1">Each player in turn selects their spell, and then the spells are cast.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E66"></span>8E66</td>
<td class="instruction">LD A,(<a href="AC34.html">num_dead_wizards</a>)</td>
<td class="comment-1" rowspan="5">If only one wizard is alive jump to <a href="89F9.html#8E93">GO_END</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E69"></span>8E69</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E6A"></span>8E6A</td>
<td class="instruction">LD HL,<a href="AC0F.html">NO_PLA</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E6D"></span>8E6D</td>
<td class="instruction">CP (HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E6E"></span>8E6E</td>
<td class="instruction">JR Z,<a href="89F9.html#8E93">GO_END</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E70"></span>8E70</td>
<td class="instruction">CALL <a href="9F50.html">INTERO</a></td>
<td class="comment-1" rowspan="1">Call <a href="9F50.html">INTERO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E73"></span>8E73</td>
<td class="instruction">CALL <a href="8F9A.html">TREPUT</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F9A.html">TREPUT</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E76"></span>8E76</td>
<td class="instruction">CALL <a href="A173.html">WALKYS</a></td>
<td class="comment-1" rowspan="1">Call <a href="A173.html">WALKYS</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E79"></span>8E79</td>
<td class="instruction">CALL <a href="AC36.html">routine21</a></td>
<td class="comment-1" rowspan="1">Call <a href="AC36.html">routine21</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E7C"></span>8E7C</td>
<td class="instruction">CALL <a href="FE56.html">set_IM2_mode</a></td>
<td class="comment-1" rowspan="1">Switch to interrupt mode 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E7F"></span>8E7F</td>
<td class="instruction">LD B,$0A</td>
<td class="comment-1" rowspan="1">Set B to ten as loop counter.</td>
</tr>
<tr>
<td class="asm-label">PAUS_L</td>
<td class="address-2"><span id="8E81"></span>8E81</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="3">Preserve BC, call <a href="96E6.html">PAUSER</a>, Restore BC.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E82"></span>8E82</td>
<td class="instruction">CALL <a href="96E6.html">PAUSER</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E85"></span>8E85</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E86"></span>8E86</td>
<td class="instruction">DJNZ <a href="89F9.html#8E81">PAUS_L</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8E81">PAUS_L</a> for ten iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E88"></span>8E88</td>
<td class="instruction">CALL <a href="FE60.html">set_IM1_mode</a></td>
<td class="comment-1" rowspan="1">Switch to interrupt mode 1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E8B"></span>8E8B</td>
<td class="instruction">LD A,(<a href="AC34.html">num_dead_wizards</a>)</td>
<td class="comment-1" rowspan="4">Compare <a href="AC34.html">num_dead_wizards</a> +1 with <a href="AC0F.html">NO_PLA</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E8E"></span>8E8E</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E8F"></span>8E8F</td>
<td class="instruction">LD HL,<a href="AC0F.html">NO_PLA</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E92"></span>8E92</td>
<td class="instruction">CP (HL)</td>
</tr>
<tr>
<td class="asm-label">GO_END</td>
<td class="address-2"><span id="8E93"></span>8E93</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E94"></span>8E94</td>
<td class="instruction">JR Z,<a href="89F9.html#8F04">ENDGAM</a></td>
<td class="comment-1" rowspan="1">If only one wizard is alive jump to <a href="89F9.html#8F04">ENDGAM</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E96"></span>8E96</td>
<td class="instruction">LD HL,<a href="7D03.html">unknown01</a></td>
<td class="comment-1" rowspan="2">Increment variable <a href="7D03.html">unknown01</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E99"></span>8E99</td>
<td class="instruction">INC (HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E9A"></span>8E9A</td>
<td class="instruction">DJNZ <a href="89F9.html#8E62">TURLOO</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8E62">TURLOO</a> for (<a href="AC0F.html">NO_PLA</a> * 2) + 15 iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E9C"></span>8E9C</td>
<td class="instruction">CALL <a href="C5EE.html">CLS</a></td>
<td class="comment-1" rowspan="1">Call <a href="C5EE.html">CLS</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8E9F"></span>8E9F</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $01 (dark blue on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EA1"></span>8EA1</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label">LOOPY</td>
<td class="address-2"><span id="8EA4"></span>8EA4</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EA7"></span>8EA7</td>
<td class="instruction">CALL <a href="BB57.html">ZRDR_P</a></td>
<td class="comment-1" rowspan="1">Draw border.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EAA"></span>8EAA</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EAD"></span>8EAD</td>
<td class="instruction">LD BC,$0202</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#895D">M_17</a> at coordinates (2,2).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EB0"></span>8EB0</td>
<td class="instruction">LD A,$10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EB2"></span>8EB2</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EB5"></span>8EB5</td>
<td class="instruction">LD HL,<a href="AC16.html">unknown_table_3</a></td>
<td class="comment-1" rowspan="1">Set HL to <a href="AC16.html">unknown_table_3</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EB8"></span>8EB8</td>
<td class="instruction">LD BC,$030A</td>
<td class="comment-1" rowspan="2">Set <a href="89AC.html">POSPRI</a> to coordinates (10,3).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EBB"></span>8EBB</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EBF"></span>8EBF</td>
<td class="instruction">LD A,$29</td>
<td class="comment-1" rowspan="2">Set <a href="AC0E.html">current_player</a> to $29 (the first wizard's name <a href="CDD3.html">game_messages_1</a>).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EC1"></span>8EC1</td>
<td class="instruction">LD (<a href="AC0E.html">current_player</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EC4"></span>8EC4</td>
<td class="instruction">LD A,(<a href="AC0F.html">NO_PLA</a>)</td>
<td class="comment-1" rowspan="2">Load <a href="AC0F.html">NO_PLA</a> into B as loop counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EC7"></span>8EC7</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="asm-label">ZAPEM</td>
<td class="address-2"><span id="8EC8"></span>8EC8</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Preserve BC and HL.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EC9"></span>8EC9</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ECA"></span>8ECA</td>
<td class="instruction">BIT 4,(HL)</td>
<td class="comment-1" rowspan="2">Jump to <a href="89F9.html#8EE2">DEDED</a> if bit 4 of byte at address in HL is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ECC"></span>8ECC</td>
<td class="instruction">JR NZ,<a href="89F9.html#8EE2">DEDED</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ECE"></span>8ECE</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ED1"></span>8ED1</td>
<td class="instruction">LD HL,<a href="AC0E.html">current_player</a></td>
<td class="comment-1" rowspan="2">Load <a href="AC0E.html">current_player</a> variable back into A (message in message table 1).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ED4"></span>8ED4</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ED5"></span>8ED5</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="4">Load BC with <a href="89AC.html">POSPRI</a> and increment twice (move two columns right).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ED9"></span>8ED9</td>
<td class="instruction">INC B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EDA"></span>8EDA</td>
<td class="instruction">INC B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EDB"></span>8EDB</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EDF"></span>8EDF</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
<td class="comment-1" rowspan="1">Print the wizard name.</td>
</tr>
<tr>
<td class="asm-label">DEDED</td>
<td class="address-2"><span id="8EE2"></span>8EE2</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="2">Restore address and advance to next entry in <a href="AC16.html">unknown_table_3</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EE3"></span>8EE3</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EE4"></span>8EE4</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
<td class="comment-1" rowspan="3">Increment <a href="AC0E.html">current_player</a> variable (next row in game message table 1).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EE7"></span>8EE7</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EE8"></span>8EE8</td>
<td class="instruction">LD (<a href="AC0E.html">current_player</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EEB"></span>8EEB</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore loop counter from stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EEC"></span>8EEC</td>
<td class="instruction">DJNZ <a href="89F9.html#8EC8">ZAPEM</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8EC8">ZAPEM</a> for <a href="AC0F.html">NO_PLA</a> iterations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EEE"></span>8EEE</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EF1"></span>8EF1</td>
<td class="instruction">LD A,$3D</td>
<td class="comment-1" rowspan="3">Print <a href="CFCB.html#D0D1">press_any_key_string</a> at coordinates (0,22).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EF3"></span>8EF3</td>
<td class="instruction">LD BC,$1600</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EF6"></span>8EF6</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EF9"></span>8EF9</td>
<td class="instruction">CALL <a href="96E6.html">PAUSER</a></td>
<td class="comment-1" rowspan="1">Call <a href="96E6.html">PAUSER</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EFC"></span>8EFC</td>
<td class="instruction">CALL $028E</td>
<td class="comment-1" rowspan="1">Call KEY-SCAN in Spectrum ROM.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8EFF"></span>8EFF</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="4">Jump back to <a href="89F9.html#8EA4">LOOPY</a> if no key is pressed else return.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F00"></span>8F00</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F01"></span>8F01</td>
<td class="instruction">JR Z,<a href="89F9.html#8EA4">LOOPY</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F03"></span>8F03</td>
<td class="instruction">RET</td>
</tr>
<tr>
<td class="asm-label">ENDGAM</td>
<td class="address-2"><span id="8F04"></span>8F04</td>
<td class="instruction">CALL <a href="C5EE.html">CLS</a></td>
<td class="comment-1" rowspan="1">Call <a href="C5EE.html">CLS</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F07"></span>8F07</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Set ATTR-T to $01 (dark blue on black).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F09"></span>8F09</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label">LOPY2</td>
<td class="address-2"><span id="8F0C"></span>8F0C</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F0F"></span>8F0F</td>
<td class="instruction">CALL <a href="BB57.html">ZRDR_P</a></td>
<td class="comment-1" rowspan="1">Draw border.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F12"></span>8F12</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F15"></span>8F15</td>
<td class="instruction">LD BC,$0409</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8979">M_18</a> at coordinates (9,4).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F18"></span>8F18</td>
<td class="instruction">LD A,$11</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F1A"></span>8F1A</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F1D"></span>8F1D</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F20"></span>8F20</td>
<td class="instruction">LD A,$12</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8987">M_19</a> at coordinates (8,8).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F22"></span>8F22</td>
<td class="instruction">LD BC,$0808</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F25"></span>8F25</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F28"></span>8F28</td>
<td class="instruction">LD A,$13</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8997">M_20</a> at coordinates (8,10).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F2A"></span>8F2A</td>
<td class="instruction">LD BC,$0A08</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F2D"></span>8F2D</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F30"></span>8F30</td>
<td class="instruction">LD A,$13</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8997">M_20</a> at coordinates (8,12).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F32"></span>8F32</td>
<td class="instruction">LD BC,$0C08</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F35"></span>8F35</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F38"></span>8F38</td>
<td class="instruction">LD A,$13</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8997">M_20</a> at coordinates (8,14).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F3A"></span>8F3A</td>
<td class="instruction">LD BC,$0E08</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F3D"></span>8F3D</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F40"></span>8F40</td>
<td class="instruction">LD A,$12</td>
<td class="comment-1" rowspan="3">Print message <a href="8859.html#8987">M_19</a> at coordinates (8,16).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F42"></span>8F42</td>
<td class="instruction">LD BC,$1008</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F45"></span>8F45</td>
<td class="instruction">CALL <a href="87EF.html">M2PRIN</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F48"></span>8F48</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F4B"></span>8F4B</td>
<td class="instruction">LD HL,<a href="AC16.html">unknown_table_3</a></td>
<td class="comment-1" rowspan="1">Set HL to address <a href="AC16.html">unknown_table_3</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F4E"></span>8F4E</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1">Set B to eight as loop counter.</td>
</tr>
<tr>
<td class="asm-label">GRONK</td>
<td class="address-2"><span id="8F50"></span>8F50</td>
<td class="instruction">BIT 4,(HL)</td>
<td class="comment-1" rowspan="2">Jump to <a href="89F9.html#8F57">main_routine_0</a> if bit 4 of byte at address in HL is set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F52"></span>8F52</td>
<td class="instruction">JR Z,<a href="89F9.html#8F57">main_routine_0</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F54"></span>8F54</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Else move on to next byte.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F55"></span>8F55</td>
<td class="instruction">DJNZ <a href="89F9.html#8F50">GRONK</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8F50">GRONK</a> for eight iterations.</td>
</tr>
<tr>
<td class="asm-label">main_routine_0</td>
<td class="address-2"><span id="8F57"></span>8F57</td>
<td class="instruction">LD A,$31</td>
<td class="comment-1" rowspan="2">Subtract loop counter from $31 to get row of wizard in <a href="CDD3.html">game_messages_1</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F59"></span>8F59</td>
<td class="instruction">SUB B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F5A"></span>8F5A</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Preserve AF.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F5B"></span>8F5B</td>
<td class="instruction">LD BC,$0C0A</td>
<td class="comment-1" rowspan="1">Load BC with coordinates (10,12).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F5E"></span>8F5E</td>
<td class="instruction">LD H,$00</td>
<td class="comment-1" rowspan="4">Set HL to four times the value in A.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F60"></span>8F60</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F61"></span>8F61</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F62"></span>8F62</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F63"></span>8F63</td>
<td class="instruction">LD DE,<a href="CDD3.html">game_messages_1</a></td>
<td class="comment-1" rowspan="2">Add offset to the address of <a href="CDD3.html">game messages table 1</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F66"></span>8F66</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F67"></span>8F67</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Add two to resulting address to move to length byte.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F68"></span>8F68</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F69"></span>8F69</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">Read byte into A.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F6A"></span>8F6A</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="2">Divide by two and copy result to E.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F6C"></span>8F6C</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F6D"></span>8F6D</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="3">Subtract E from sixteen and copy result to C.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F6F"></span>8F6F</td>
<td class="instruction">SUB E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F70"></span>8F70</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F71"></span>8F71</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore row of <a href="CDD3.html">game messages table 1</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F72"></span>8F72</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
<td class="comment-1" rowspan="1">Print wizard name centred in box.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F75"></span>8F75</td>
<td class="instruction">CALL <a href="8F8B.html">ATTRDO</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F8B.html">ATTRDO</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F78"></span>8F78</td>
<td class="instruction">LD A,$3D</td>
<td class="comment-1" rowspan="3">Print <a href="CFCB.html#D0D1">press_any_key_string</a> at coordinates (0,22).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F7A"></span>8F7A</td>
<td class="instruction">LD BC,$1600</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F7D"></span>8F7D</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F80"></span>8F80</td>
<td class="instruction">CALL <a href="96E6.html">PAUSER</a></td>
<td class="comment-1" rowspan="1">Call <a href="96E6.html">PAUSER</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F83"></span>8F83</td>
<td class="instruction">CALL $028E</td>
<td class="comment-1" rowspan="3">Call KEY-SCAN in ROM to see if a key was pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F86"></span>8F86</td>
<td class="instruction">LD A,E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F87"></span>8F87</td>
<td class="instruction">INC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F88"></span>8F88</td>
<td class="instruction">JR Z,<a href="89F9.html#8F0C">LOPY2</a></td>
<td class="comment-1" rowspan="1">Loop back to <a href="89F9.html#8F0C">LOPY2</a> if no key was pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8F8A"></span>8F8A</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Else return (to BASIC).</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="89EF.html">89EF</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#89F9">Map</a></td>
<td class="next">
Next: <a href="8F8B.html">8F8B</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/89F9.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:20 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9168.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:21 GMT -->
<head>
<title>Chaos: Routine at 9168</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9167.html">9167</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9168">Map</a></td>
<td class="next">
Next: <a href="92AA.html">92AA</a>
</td>
</tr>
</table>
<div class="description">9168: CAST_S</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="89F9.html">main_routine</a>.
</div>
<div class="paragraph">
Loop through each player to select their spell to cast, then jump into <a href="95C7.html">routine06</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">CAST_S</td>
<td class="address-2"><span id="9168"></span>9168</td>
<td class="instruction">LD HL,<a href="9156.html">cast_table</a></td>
<td class="comment-1" rowspan="5">Clear <a href="9156.html">cast_table</a> and <a href="9156.html#915E">illusion_table</a> to zeros.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="916B"></span>916B</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="916D"></span>916D</td>
<td class="instruction">LD DE,$9157</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9170"></span>9170</td>
<td class="instruction">LD BC,$000F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9173"></span>9173</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9175"></span>9175</td>
<td class="instruction">LD HL,<a href="7F27.html">s_cursor_sprite</a></td>
<td class="comment-1" rowspan="2">set UDG system variable to point to <a href="7F27.html">S cursor sprite data</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9178"></span>9178</td>
<td class="instruction">LD ($5C7B),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="917B"></span>917B</td>
<td class="instruction">LD A,(<a href="AC0F.html">NO_PLA</a>)</td>
<td class="comment-1" rowspan="2">load <a href="AC0F.html">NO_PLA</a> into B as player loop counter</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="917E"></span>917E</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="917F"></span>917F</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">set <a href="AC0E.html">current_player</a> to zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9181"></span>9181</td>
<td class="instruction">LD (<a href="AC0E.html">current_player</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9184"></span>9184</td>
<td class="instruction">DI</td>
<td class="comment-1" rowspan="1">disable interrupts</td>
</tr>
<tr>
<td class="asm-label">cast_s_players_loop</td>
<td class="address-2"><span id="9185"></span>9185</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">stack BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9186"></span>9186</td>
<td class="instruction">LD HL,<a href="AC16.html">unknown_table_3</a></td>
<td class="comment-1" rowspan="1">set HL to address of <a href="AC16.html">unknown_table_3</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9189"></span>9189</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
<td class="comment-1" rowspan="1">load <a href="AC0E.html">current_player</a> into A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="918C"></span>918C</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="3">add current player as offset in <a href="AC16.html">unknown_table_3</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="918E"></span>918E</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="918F"></span>918F</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9190"></span>9190</td>
<td class="instruction">BIT 4,(HL)</td>
<td class="comment-1" rowspan="2">if bit 4 of address is not zero jump to <a href="9168.html#929E">cast_s_continue</a> ???</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9192"></span>9192</td>
<td class="instruction">JP NZ,<a href="9168.html#929E">cast_s_continue</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9195"></span>9195</td>
<td class="instruction">CALL <a href="95B8.html">get_player_controlled_flag</a></td>
<td class="comment-1" rowspan="1">call <a href="95B8.html">get_player_controlled_flag</a> to check if player is computer controlled</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9198"></span>9198</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="2">jump to <a href="9168.html#929E">cast_s_continue</a> if current player is computer controlled</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9199"></span>9199</td>
<td class="instruction">JP NZ,<a href="9168.html#929E">cast_s_continue</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="919C"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="92BE.html">examine_board</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">cast_s_menu_loop</td>
<td class="address-2"><span id="919C"></span>919C</td>
<td class="instruction">LD HL,<a href="C2E3.html">sound_effect_23</a></td>
<td class="comment-1" rowspan="1">set HL to address of sound effect data at <a href="C2E3.html">sound_effect_23</a>. This overlaps the sound effect playback data memory with the result that when copied the same 5 bytes are repeated.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="919F"></span>919F</td>
<td class="instruction">CALL <a href="C2F6.html#C2F9">play_sound_effect_in_HL</a></td>
<td class="comment-1" rowspan="1">call play_sound_effect_in_HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91A2"></span>91A2</td>
<td class="instruction">CALL <a href="BBCC.html">wait_no_key_seed</a></td>
<td class="comment-1" rowspan="1">wait for no key to be pressed</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91A5"></span>91A5</td>
<td class="instruction">CALL <a href="C5EE.html">CLS</a></td>
<td class="comment-1" rowspan="1">call <a href="C5EE.html">CLS</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91A8"></span>91A8</td>
<td class="instruction">LD A,$72</td>
<td class="comment-1" rowspan="3">set ATTR-T to $72 (bright red on yellow) and draw border.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91AA"></span>91AA</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91AD"></span>91AD</td>
<td class="instruction">CALL <a href="BB57.html">ZRDR_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91B0"></span>91B0</td>
<td class="instruction">LD A,(<a href="C3A4.html">CH_LAW</a>)</td>
<td class="comment-1" rowspan="3">jump forwards to <a href="9168.html#9230">cast_s_ch_law_done</a> if <a href="C3A4.html">CH_LAW</a> is zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91B3"></span>91B3</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91B4"></span>91B4</td>
<td class="instruction">JR Z,<a href="9168.html#9230">cast_s_ch_law_done</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91B6"></span>91B6</td>
<td class="instruction">LD BC,$0707</td>
<td class="comment-1" rowspan="1">set BC to coordinates (7,7)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91B9"></span>91B9</td>
<td class="instruction">JP M,<a href="9168.html#91F6">cast_s_chaotic</a></td>
<td class="comment-1" rowspan="1">jump forwards to <a href="9168.html#91F6">cast_s_chaotic</a> if <a href="C3A4.html">CH_LAW</a> is positive</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91BC"></span>91BC</td>
<td class="instruction">LD A,$46</td>
<td class="comment-1" rowspan="2">set ATTR-T to $46 (bright yellow on black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91BE"></span>91BE</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91C1"></span>91C1</td>
<td class="instruction">LD A,$47</td>
<td class="comment-1" rowspan="2">Print <a href="CFCB.html#D125">law_string</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91C3"></span>91C3</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91C6"></span>91C6</td>
<td class="instruction">LD A,(<a href="C3A4.html">CH_LAW</a>)</td>
<td class="comment-1" rowspan="3">load <a href="C3A4.html">CH_LAW</a> into A and divide by four</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91C9"></span>91C9</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91CB"></span>91CB</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91CD"></span>91CD</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="2">jump forwards to <a href="9168.html#91EF">cast_s_end_law</a> if result is zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91CE"></span>91CE</td>
<td class="instruction">JR Z,<a href="9168.html#91EF">cast_s_end_law</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91D0"></span>91D0</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
<td class="comment-1" rowspan="1">set <a href="89AC.html">POSPRI</a> to coordinates (7,7)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91D4"></span>91D4</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">copy <a href="C3A4.html">CH_LAW</a>/4 into B</td>
</tr>
<tr>
<td class="asm-label">cast_s_law_loop</td>
<td class="address-2"><span id="91D5"></span>91D5</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">preserve BC (loop counter)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91D6"></span>91D6</td>
<td class="instruction">LD A,$5E</td>
<td class="comment-1" rowspan="3">call <a href="BAD6.html">DH_P</a> with character '^'</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91D8"></span>91D8</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91DC"></span>91DC</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91DF"></span>91DF</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="3">move <a href="89AC.html">POSPRI</a> one character right</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91E3"></span>91E3</td>
<td class="instruction">INC C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91E4"></span>91E4</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91E8"></span>91E8</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">restore BC (loop counter)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91E9"></span>91E9</td>
<td class="instruction">DJNZ <a href="9168.html#91D5">cast_s_law_loop</a></td>
<td class="comment-1" rowspan="1">loop back to <a href="9168.html#91D5">cast_s_law_loop</a> <a href="C3A4.html">CH_LAW</a>/4 - 1 times</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91EB"></span>91EB</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="1">load <a href="89AC.html">POSPRI</a> into BC</td>
</tr>
<tr>
<td class="asm-label">cast_s_end_law</td>
<td class="address-2"><span id="91EF"></span>91EF</td>
<td class="instruction">LD A,$29</td>
<td class="comment-1" rowspan="3">call <a href="BAD6.html">DH_P</a> with ')' character and jump forwards to <a href="9168.html#9230">cast_s_ch_law_done</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91F1"></span>91F1</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91F4"></span>91F4</td>
<td class="instruction">JR <a href="9168.html#9230">cast_s_ch_law_done</a></td>
</tr>
<tr>
<td class="asm-label">cast_s_chaotic</td>
<td class="address-2"><span id="91F6"></span>91F6</td>
<td class="instruction">LD A,$45</td>
<td class="comment-1" rowspan="2">set ATTR-T to $45 (bright cyan on black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91F8"></span>91F8</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91FB"></span>91FB</td>
<td class="instruction">LD A,$46</td>
<td class="comment-1" rowspan="2">Print <a href="CFCB.html#D11E">chaos_string</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="91FD"></span>91FD</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9200"></span>9200</td>
<td class="instruction">LD A,(<a href="C3A4.html">CH_LAW</a>)</td>
<td class="comment-1" rowspan="1">load <a href="C3A4.html">CH_LAW</a> into A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9203"></span>9203</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
<td class="comment-1" rowspan="1">store BC in <a href="89AC.html">POSPRI</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9207"></span>9207</td>
<td class="instruction">NEG</td>
<td class="comment-1" rowspan="1">negate A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9209"></span>9209</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="2">divide by 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="920B"></span>920B</td>
<td class="instruction">SRA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="920D"></span>920D</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="2">jump forwards to <a href="9168.html#922B">cast_s_end_chaos</a> if -<a href="C3A4.html">CH_LAW</a>/4 is zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="920E"></span>920E</td>
<td class="instruction">JR Z,<a href="9168.html#922B">cast_s_end_chaos</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9210"></span>9210</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="2">copy -<a href="C3A4.html">CH_LAW</a>/4 into B and stack BC</td>
</tr>
<tr>
<td class="asm-label">cast_s_chaos_loop</td>
<td class="address-2"><span id="9211"></span>9211</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9212"></span>9212</td>
<td class="instruction">LD A,$2A</td>
<td class="comment-1" rowspan="3">call <a href="BAD6.html">DH_P</a> with character '*'</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9214"></span>9214</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9218"></span>9218</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="921B"></span>921B</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="3">move <a href="89AC.html">POSPRI</a> one character right</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="921F"></span>921F</td>
<td class="instruction">INC C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9220"></span>9220</td>
<td class="instruction">LD (<a href="89AC.html">POSPRI</a>),BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9224"></span>9224</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="2">restore loop counter and loop back to <a href="9168.html#9211">cast_s_chaos_loop</a> -<a href="C3A4.html">CH_LAW</a>/4 - 1 times</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9225"></span>9225</td>
<td class="instruction">DJNZ <a href="9168.html#9211">cast_s_chaos_loop</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9227"></span>9227</td>
<td class="instruction">LD BC,(<a href="89AC.html">POSPRI</a>)</td>
<td class="comment-1" rowspan="1">load <a href="89AC.html">POSPRI</a> into BC</td>
</tr>
<tr>
<td class="asm-label">cast_s_end_chaos</td>
<td class="address-2"><span id="922B"></span>922B</td>
<td class="instruction">LD A,$29</td>
<td class="comment-1" rowspan="2">call <a href="BAD6.html">DH_P</a> with character ')'</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="922D"></span>922D</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label">cast_s_ch_law_done</td>
<td class="address-2"><span id="9230"></span>9230</td>
<td class="instruction">LD A,$46</td>
<td class="comment-1" rowspan="2">set ATTR-T to $46 (bright yellow on black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9232"></span>9232</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9235"></span>9235</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
<td class="comment-1" rowspan="1">load <a href="AC0E.html">current_player</a> into A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9238"></span>9238</td>
<td class="instruction">ADD A,$29</td>
<td class="comment-1" rowspan="1">add $29 (first wizard name string in <a href="CDD3.html">game messages table 1</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="923A"></span>923A</td>
<td class="instruction">LD BC,$0507</td>
<td class="comment-1" rowspan="2">Print <a href="EA39.html">wizard_0</a> at coordinates (7,5)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="923D"></span>923D</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9240"></span>9240</td>
<td class="instruction">LD A,$45</td>
<td class="comment-1" rowspan="2">set ATTR-T to $45 (bright cyan on black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9242"></span>9242</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9245"></span>9245</td>
<td class="instruction">LD A,$59</td>
<td class="comment-1" rowspan="3">Print <a href="CFCB.html#D211">examine_spells_string</a> at coordinates (7,9)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9247"></span>9247</td>
<td class="instruction">LD BC,$0907</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="924A"></span>924A</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="924D"></span>924D</td>
<td class="instruction">LD A,$5A</td>
<td class="comment-1" rowspan="3">Print <a href="CFCB.html#D221">select_spell_string</a> at coordinates (7,11)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="924F"></span>924F</td>
<td class="instruction">LD BC,$0B07</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9252"></span>9252</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9255"></span>9255</td>
<td class="instruction">LD A,$5B</td>
<td class="comment-1" rowspan="3">Print <a href="CFCB.html#D22F">examine_board_string</a> at coordinates (7,13)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9257"></span>9257</td>
<td class="instruction">LD BC,$0D07</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="925A"></span>925A</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="925D"></span>925D</td>
<td class="instruction">LD A,$5C</td>
<td class="comment-1" rowspan="3">Print <a href="CFCB.html#D23E">continue_game_string</a> at coordinates (7,15)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="925F"></span>925F</td>
<td class="instruction">LD BC,$0F07</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9262"></span>9262</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9265"></span>9265</td>
<td class="instruction">LD A,$56</td>
<td class="comment-1" rowspan="2">set ATTR-T to $56 (bright yellow on red)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9267"></span>9267</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="926A"></span>926A</td>
<td class="instruction">LD A,$57</td>
<td class="comment-1" rowspan="3">Print <a href="CFCB.html#D1D1">press_1_to_4_string</a> at coordinates (0,22)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="926C"></span>926C</td>
<td class="instruction">LD BC,$1600</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="926F"></span>926F</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9272"></span>9272</td>
<td class="instruction">CALL <a href="92AA.html">GETHIS</a></td>
<td class="comment-1" rowspan="1">call <a href="92AA.html">GETHIS</a></td>
</tr>
<tr>
<td class="asm-label">cast_s_key_loop</td>
<td class="address-2"><span id="9275"></span>9275</td>
<td class="instruction">CALL $02BF</td>
<td class="comment-1" rowspan="1">call KEYBOARD routine in ROM returning character code in A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9278"></span>9278</td>
<td class="instruction">LD HL,<a href="9384.html">cast_spell_flag</a></td>
<td class="comment-1" rowspan="2">Clear <a href="9384.html">cast_spell_flag</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="927B"></span>927B</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="927D"></span>927D</td>
<td class="instruction">CP $31</td>
<td class="comment-1" rowspan="4">if A equals '1' then display spells then jump back to <a href="9168.html#919C">cast_s_menu_loop</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="927F"></span>927F</td>
<td class="instruction">JR NZ,<a href="9168.html#9287">cast_s_not_1</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9281"></span>9281</td>
<td class="instruction">CALL <a href="9385.html">select_spell</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9284"></span>9284</td>
<td class="instruction">JP <a href="9168.html#919C">cast_s_menu_loop</a></td>
</tr>
<tr>
<td class="asm-label">cast_s_not_1</td>
<td class="address-2"><span id="9287"></span>9287</td>
<td class="instruction">CP $34</td>
<td class="comment-1" rowspan="2">else if A equals '4' then jump to <a href="9168.html#929E">cast_s_continue</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9289"></span>9289</td>
<td class="instruction">JR Z,<a href="9168.html#929E">cast_s_continue</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="928B"></span>928B</td>
<td class="instruction">CP $33</td>
<td class="comment-1" rowspan="2">else if A equals '3' then jump to <a href="92BE.html">examine_board</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="928D"></span>928D</td>
<td class="instruction">JR Z,<a href="92BE.html">examine_board</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="928F"></span>928F</td>
<td class="instruction">CP $32</td>
<td class="comment-1" rowspan="2">else if A does not equal '2' then loop back to <a href="9168.html#9275">cast_s_key_loop</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9291"></span>9291</td>
<td class="instruction">JR NZ,<a href="9168.html#9275">cast_s_key_loop</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9293"></span>9293</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">'2' key was pressed, set <a href="9384.html">cast_spell_flag</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9295"></span>9295</td>
<td class="instruction">LD (<a href="9384.html">cast_spell_flag</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9298"></span>9298</td>
<td class="instruction">CALL <a href="9385.html">select_spell</a></td>
<td class="comment-1" rowspan="2">Select spell then jump back to <a href="9168.html#919C">cast_s_menu_loop</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="929B"></span>929B</td>
<td class="instruction">JP <a href="9168.html#919C">cast_s_menu_loop</a></td>
</tr>
<tr>
<td class="asm-label">cast_s_continue</td>
<td class="address-2"><span id="929E"></span>929E</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">'4' key was pressed, restore BC (player loop counter)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="929F"></span>929F</td>
<td class="instruction">LD HL,<a href="AC0E.html">current_player</a></td>
<td class="comment-1" rowspan="2">increment <a href="AC0E.html">current_player</a> variable</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="92A2"></span>92A2</td>
<td class="instruction">INC (HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="92A3"></span>92A3</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">decrement B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="92A4"></span>92A4</td>
<td class="instruction">JP NZ,<a href="9168.html#9185">cast_s_players_loop</a></td>
<td class="comment-1" rowspan="1">jump back to <a href="9168.html#9185">cast_s_players_loop</a> if there are still players to process</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="92A7"></span>92A7</td>
<td class="instruction">JP <a href="95C7.html">routine06</a></td>
<td class="comment-1" rowspan="1">else jump to <a href="95C7.html">routine06</a> ???</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9167.html">9167</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9168">Map</a></td>
<td class="next">
Next: <a href="92AA.html">92AA</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9168.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:21 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9975.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:21 GMT -->
<head>
<title>Chaos: Routine at 9975</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9941.html">9941</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9975">Map</a></td>
<td class="next">
Next: <a href="99F1.html">99F1</a>
</td>
</tr>
</table>
<div class="description">9975: CreatureCast spell</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="95C7.html">routine06</a> and <a href="96F3.html">routine08</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">creature_cast_spell</td>
<td class="address-2"><span id="9975"></span>9975</td>
<td class="instruction">LD A,$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9977"></span>9977</td>
<td class="instruction">LD (<a href="97CE.html">unknown11</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="997A"></span>997A</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="997D"></span>997D</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="997E"></span>997E</td>
<td class="instruction">JR NZ,<a href="9975.html#9984">creature_cast_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9980"></span>9980</td>
<td class="instruction">CALL <a href="981A.html">routine13</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9983"></span>9983</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">creature_cast_spell_0</td>
<td class="address-2"><span id="9984"></span>9984</td>
<td class="instruction">CALL <a href="C78D.html">routine55</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9987"></span>9987</td>
<td class="instruction">LD A,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9989"></span>9989</td>
<td class="instruction">LD (<a href="AC03.html">unknown18</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="998C"></span>998C</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="998F"></span>998F</td>
<td class="instruction">CP $22</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9991"></span>9991</td>
<td class="instruction">JP M,<a href="9975.html#9999">creature_cast_spell_1</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9994"></span>9994</td>
<td class="instruction">LD A,$0D</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9996"></span>9996</td>
<td class="instruction">LD (<a href="AC03.html">unknown18</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9999"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="D686.html">routine77</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">creature_cast_spell_1</td>
<td class="address-2"><span id="9999"></span>9999</td>
<td class="instruction">CALL <a href="C955.html">routine60</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">creature_cast_spell_2</td>
<td class="address-2"><span id="999C"></span>999C</td>
<td class="instruction">CALL <a href="C9D4.html#C9DC">routine61_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="999F"></span>999F</td>
<td class="instruction">CP $4B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99A1"></span>99A1</td>
<td class="instruction">JR NZ,<a href="9975.html#99A9">creature_cast_spell_3</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99A3"></span>99A3</td>
<td class="instruction">LD A,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99A5"></span>99A5</td>
<td class="instruction">LD (<a href="975F.html">unknown10</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99A8"></span>99A8</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">creature_cast_spell_3</td>
<td class="address-2"><span id="99A9"></span>99A9</td>
<td class="instruction">CALL <a href="980E.html">OFBORD</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99AC"></span>99AC</td>
<td class="instruction">JR Z,<a href="9975.html#999C">creature_cast_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99AE"></span>99AE</td>
<td class="instruction">CALL <a href="98DB.html">routine14</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99B1"></span>99B1</td>
<td class="instruction">JR NZ,<a href="9975.html#999C">creature_cast_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99B3"></span>99B3</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99B6"></span>99B6</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99B7"></span>99B7</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99B8"></span>99B8</td>
<td class="instruction">JR Z,<a href="9975.html#99C3">creature_cast_spell_4</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99BA"></span>99BA</td>
<td class="instruction">LD DE,$0141</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99BD"></span>99BD</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99BE"></span>99BE</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99BF"></span>99BF</td>
<td class="instruction">CP $04</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99C1"></span>99C1</td>
<td class="instruction">JR NZ,<a href="9975.html#999C">creature_cast_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">creature_cast_spell_4</td>
<td class="address-2"><span id="99C3"></span>99C3</td>
<td class="instruction">CALL <a href="967A.html">display_wizard_spell_range</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99C6"></span>99C6</td>
<td class="instruction">CALL <a href="A18A.html">routine20</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99C9"></span>99C9</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99CC"></span>99CC</td>
<td class="instruction">CP $22</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99CE"></span>99CE</td>
<td class="instruction">JP P,<a href="9975.html#99DE">creature_cast_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99D1"></span>99D1</td>
<td class="instruction">CALL <a href="BE94.html">get_random</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99D4"></span>99D4</td>
<td class="instruction">CP $02</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99D6"></span>99D6</td>
<td class="instruction">JP P,<a href="9975.html#99DE">creature_cast_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99D9"></span>99D9</td>
<td class="instruction">LD A,$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99DB"></span>99DB</td>
<td class="instruction">LD (<a href="9166.html">unknown02</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="99DE"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="D686.html">routine77</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">creature_cast_spell_5</td>
<td class="address-2"><span id="99DE"></span>99DE</td>
<td class="instruction">CALL <a href="9760.html">routine09</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99E1"></span>99E1</td>
<td class="instruction">LD A,(<a href="9167.html">spell_success_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99E4"></span>99E4</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99E5"></span>99E5</td>
<td class="instruction">CALL NZ,<a href="9941.html">routine16</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99E8"></span>99E8</td>
<td class="instruction">LD A,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99EA"></span>99EA</td>
<td class="instruction">LD (<a href="9166.html">unknown02</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99ED"></span>99ED</td>
<td class="instruction">CALL <a href="97A3.html">routine11</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99F0"></span>99F0</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9941.html">9941</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9975">Map</a></td>
<td class="next">
Next: <a href="99F1.html">99F1</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9975.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:21 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/99F1.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:20 GMT -->
<head>
<title>Chaos: Routine at 99F1</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9975.html">9975</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#99F1">Map</a></td>
<td class="next">
Next: <a href="9ADD.html">9ADD</a>
</td>
</tr>
</table>
<div class="description">99F1: Disbelieve spell</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell</td>
<td class="address-2"><span id="99F1"></span>99F1</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99F4"></span>99F4</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99F5"></span>99F5</td>
<td class="instruction">JP NZ,<a href="99F1.html#9A95">disbelieve_spell_6</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="99F8"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="D702.html">routine78</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_0</td>
<td class="address-2"><span id="99F8"></span>99F8</td>
<td class="instruction">CALL <a href="BC96.html">routine41</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99FB"></span>99FB</td>
<td class="instruction">CALL $02BF</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99FE"></span>99FE</td>
<td class="instruction">CP $53</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A00"></span>9A00</td>
<td class="instruction">JR Z,<a href="99F1.html#9A0E">disbelieve_spell_1</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A02"></span>9A02</td>
<td class="instruction">CP $4B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A04"></span>9A04</td>
<td class="instruction">JR NZ,<a href="99F1.html#99F8">disbelieve_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A06"></span>9A06</td>
<td class="instruction">LD HL,<a href="C2B1.html">sound_effect_18</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A09"></span>9A09</td>
<td class="instruction">CALL <a href="C2F6.html#C2F9">play_sound_effect_in_HL</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A0C"></span>9A0C</td>
<td class="instruction">EI</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A0D"></span>9A0D</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_1</td>
<td class="address-2"><span id="9A0E"></span>9A0E</td>
<td class="instruction">CALL <a href="BBCC.html">wait_no_key_seed</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A11"></span>9A11</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A14"></span>9A14</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A15"></span>9A15</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A16"></span>9A16</td>
<td class="instruction">JR Z,<a href="99F1.html#99F8">disbelieve_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A18"></span>9A18</td>
<td class="instruction">CP $22</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A1A"></span>9A1A</td>
<td class="instruction">JP P,<a href="99F1.html#99F8">disbelieve_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A1D"></span>9A1D</td>
<td class="instruction">CALL <a href="99F1.html#9A21">disbelieve_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A20"></span>9A20</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9A21"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="D702.html">routine78</a> and <a href="D7A6.html">routine81</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_2</td>
<td class="address-2"><span id="9A21"></span>9A21</td>
<td class="instruction">CALL <a href="A18A.html">routine20</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A24"></span>9A24</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A27"></span>9A27</td>
<td class="instruction">LD A,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A29"></span>9A29</td>
<td class="instruction">LD (<a href="9167.html">spell_success_flag</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A2C"></span>9A2C</td>
<td class="instruction">LD DE,$01E1</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A2F"></span>9A2F</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A30"></span>9A30</td>
<td class="instruction">BIT 4,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A32"></span>9A32</td>
<td class="instruction">JR Z,<a href="99F1.html#9A45">disbelieve_spell_3</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A34"></span>9A34</td>
<td class="instruction">LD DE,$00A0</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A37"></span>9A37</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A38"></span>9A38</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A39"></span>9A39</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A3C"></span>9A3C</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A3D"></span>9A3D</td>
<td class="instruction">CALL <a href="99F1.html#9A52">disbelieve_spell_4</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A40"></span>9A40</td>
<td class="instruction">LD A,$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A42"></span>9A42</td>
<td class="instruction">LD (<a href="9167.html">spell_success_flag</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_3</td>
<td class="address-2"><span id="9A45"></span>9A45</td>
<td class="instruction">CALL <a href="97A3.html">routine11</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A48"></span>9A48</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A4B"></span>9A4B</td>
<td class="instruction">LD DE,$01E1</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A4E"></span>9A4E</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A4F"></span>9A4F</td>
<td class="instruction">SET 5,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A51"></span>9A51</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9A52"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="9C59.html">lightning_spell</a>, <a href="9DE0.html">dark_power_spell</a>, <a href="9F50.html">INTERO</a> and <a href="D732.html">routine79</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_4</td>
<td class="address-2"><span id="9A52"></span>9A52</td>
<td class="instruction">LD HL,<a href="9121.html">sound_effect_03</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A55"></span>9A55</td>
<td class="instruction">LD (<a href="C2F3.html">sound_effect_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A58"></span>9A58</td>
<td class="instruction">CALL <a href="C2F6.html">play_sound_effect_pointer</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A5B"></span>9A5B</td>
<td class="instruction">LD A,$46</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A5D"></span>9A5D</td>
<td class="instruction">LD ($5C8F),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A60"></span>9A60</td>
<td class="instruction">LD HL,<a href="A345.html">explosion0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A63"></span>9A63</td>
<td class="instruction">LD (<a href="A188.html">explosion_sprite_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A66"></span>9A66</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A69"></span>9A69</td>
<td class="instruction">LD (<a href="E005.html">temp_entry_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A6C"></span>9A6C</td>
<td class="instruction">CALL <a href="E007.html">address_to_coordinate</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A6F"></span>9A6F</td>
<td class="instruction">LD (<a href="DF4C.html">LC_POS</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A72"></span>9A72</td>
<td class="instruction">LD B,$07</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A74"></span>9A74</td>
<td class="instruction">DI</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_5</td>
<td class="address-2"><span id="9A75"></span>9A75</td>
<td class="instruction">PUSH BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A76"></span>9A76</td>
<td class="instruction">LD HL,(<a href="A188.html">explosion_sprite_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A79"></span>9A79</td>
<td class="instruction">LD (<a href="DF4A.html">C_DATA</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A7C"></span>9A7C</td>
<td class="instruction">CALL <a href="DF4E.html">P_CHAR</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A7F"></span>9A7F</td>
<td class="instruction">CALL <a href="C2F6.html#C301">sound_effect_playback</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A82"></span>9A82</td>
<td class="instruction">LD DE,$0020</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A85"></span>9A85</td>
<td class="instruction">LD HL,(<a href="A188.html">explosion_sprite_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A88"></span>9A88</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A89"></span>9A89</td>
<td class="instruction">LD (<a href="A188.html">explosion_sprite_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A8C"></span>9A8C</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A8D"></span>9A8D</td>
<td class="instruction">DJNZ <a href="99F1.html#9A75">disbelieve_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A8F"></span>9A8F</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A92"></span>9A92</td>
<td class="instruction">EI</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A93"></span>9A93</td>
<td class="instruction">HALT</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A94"></span>9A94</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9A95"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="D702.html">routine78</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_6</td>
<td class="address-2"><span id="9A95"></span>9A95</td>
<td class="instruction">LD HL,(<a href="AC14.html">D_ADD</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A98"></span>9A98</td>
<td class="instruction">LD (<a href="C78B.html">TEMADD</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A9B"></span>9A9B</td>
<td class="instruction">CALL <a href="C7BC.html">EN_AN</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9A9E"></span>9A9E</td>
<td class="instruction">LD HL,(<a href="C78B.html">TEMADD</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AA1"></span>9AA1</td>
<td class="instruction">LD (<a href="AC14.html">D_ADD</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AA4"></span>9AA4</td>
<td class="instruction">LD HL,<a href="D3F2.html">INBUF</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AA7"></span>9AA7</td>
<td class="instruction">LD (<a href="CD86.html">BUFPNT</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AAA"></span>9AAA</td>
<td class="instruction">LD A,(<a href="C7BB.html">SRTCNT</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AAD"></span>9AAD</td>
<td class="instruction">INC A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AAE"></span>9AAE</td>
<td class="instruction">CALL <a href="C64C.html">SORT</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9AB1"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="D7A6.html">routine81</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_7</td>
<td class="address-2"><span id="9AB1"></span>9AB1</td>
<td class="instruction">CALL <a href="A17E.html">GETPLA</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AB4"></span>9AB4</td>
<td class="instruction">CP $FF</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AB6"></span>9AB6</td>
<td class="instruction">JR NZ,<a href="99F1.html#9ABE">disbelieve_spell_8</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AB8"></span>9AB8</td>
<td class="instruction">LD A,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ABA"></span>9ABA</td>
<td class="instruction">LD (<a href="975F.html">unknown10</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ABD"></span>9ABD</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">disbelieve_spell_8</td>
<td class="address-2"><span id="9ABE"></span>9ABE</td>
<td class="instruction">LD HL,<a href="E01F.html">map_object_table</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AC1"></span>9AC1</td>
<td class="instruction">LD D,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AC3"></span>9AC3</td>
<td class="instruction">LD E,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AC4"></span>9AC4</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AC5"></span>9AC5</td>
<td class="instruction">LD (<a href="AC12.html">object_table_entry_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AC8"></span>9AC8</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AC9"></span>9AC9</td>
<td class="instruction">CP $22</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ACB"></span>9ACB</td>
<td class="instruction">JP P,<a href="99F1.html#9AB1">disbelieve_spell_7</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ACE"></span>9ACE</td>
<td class="instruction">LD DE,$01E1</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AD1"></span>9AD1</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AD2"></span>9AD2</td>
<td class="instruction">BIT 5,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AD4"></span>9AD4</td>
<td class="instruction">JR NZ,<a href="99F1.html#9AB1">disbelieve_spell_7</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AD6"></span>9AD6</td>
<td class="instruction">CALL <a href="967A.html">display_wizard_spell_range</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AD9"></span>9AD9</td>
<td class="instruction">CALL <a href="99F1.html#9A21">disbelieve_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ADC"></span>9ADC</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9975.html">9975</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#99F1">Map</a></td>
<td class="next">
Next: <a href="9ADD.html">9ADD</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/99F1.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:20 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9ADD.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:17 GMT -->
<head>
<title>Chaos: Routine at 9ADD</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="99F1.html">99F1</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9ADD">Map</a></td>
<td class="next">
Next: <a href="9B76.html">9B76</a>
</td>
</tr>
</table>
<div class="description">9ADD: Trees&amp;Castles spell</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell</td>
<td class="address-2"><span id="9ADD"></span>9ADD</td>
<td class="instruction">LD A,$08</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ADF"></span>9ADF</td>
<td class="instruction">LD (<a href="97CE.html">unknown11</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AE2"></span>9AE2</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AE5"></span>9AE5</td>
<td class="instruction">CP $26</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AE7"></span>9AE7</td>
<td class="instruction">JP M,<a href="9ADD.html#9AEF">trees_castles_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AEA"></span>9AEA</td>
<td class="instruction">LD A,$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AEC"></span>9AEC</td>
<td class="instruction">LD (<a href="97CE.html">unknown11</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9AEF"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="D7EE.html">routine82</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell_0</td>
<td class="address-2"><span id="9AEF"></span>9AEF</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AF2"></span>9AF2</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AF3"></span>9AF3</td>
<td class="instruction">JR NZ,<a href="9ADD.html#9B00">trees_castles_spell_1</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AF5"></span>9AF5</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AF8"></span>9AF8</td>
<td class="instruction">CP $24</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AFA"></span>9AFA</td>
<td class="instruction">JR Z,<a href="9ADD.html#9B1F">trees_castles_spell_3</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AFC"></span>9AFC</td>
<td class="instruction">CALL <a href="981A.html">routine13</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9AFF"></span>9AFF</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell_1</td>
<td class="address-2"><span id="9B00"></span>9B00</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B03"></span>9B03</td>
<td class="instruction">CP $26</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B05"></span>9B05</td>
<td class="instruction">JP M,<a href="9ADD.html#9B1C">trees_castles_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B08"></span>9B08</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B0B"></span>9B0B</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B0C"></span>9B0C</td>
<td class="instruction">CP $26</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B0E"></span>9B0E</td>
<td class="instruction">JP M,<a href="9ADD.html#9B1C">trees_castles_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B11"></span>9B11</td>
<td class="instruction">CP $28</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B13"></span>9B13</td>
<td class="instruction">JP P,<a href="9ADD.html#9B1C">trees_castles_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B16"></span>9B16</td>
<td class="instruction">LD A,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B18"></span>9B18</td>
<td class="instruction">LD (<a href="975F.html">unknown10</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B1B"></span>9B1B</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9B1C"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="D7EE.html">routine82</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell_2</td>
<td class="address-2"><span id="9B1C"></span>9B1C</td>
<td class="instruction">CALL <a href="967A.html">display_wizard_spell_range</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell_3</td>
<td class="address-2"><span id="9B1F"></span>9B1F</td>
<td class="instruction">LD HL,(<a href="AC14.html">D_ADD</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B22"></span>9B22</td>
<td class="instruction">LD (<a href="C8B7.html">AIM</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B25"></span>9B25</td>
<td class="instruction">LD A,$0D</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B27"></span>9B27</td>
<td class="instruction">LD (<a href="AC03.html">unknown18</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B2A"></span>9B2A</td>
<td class="instruction">CALL <a href="9760.html">routine09</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B2D"></span>9B2D</td>
<td class="instruction">LD A,(<a href="97CE.html">unknown11</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B30"></span>9B30</td>
<td class="instruction">LD B,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell_4</td>
<td class="address-2"><span id="9B31"></span>9B31</td>
<td class="instruction">PUSH BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B32"></span>9B32</td>
<td class="instruction">CALL <a href="C955.html">routine60</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell_5</td>
<td class="address-2"><span id="9B35"></span>9B35</td>
<td class="instruction">CALL <a href="C9D4.html#C9DC">routine61_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B38"></span>9B38</td>
<td class="instruction">CP $4B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B3A"></span>9B3A</td>
<td class="instruction">JR Z,<a href="9ADD.html#9B74">trees_castles_spell_7</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B3C"></span>9B3C</td>
<td class="instruction">CALL <a href="980E.html">OFBORD</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B3F"></span>9B3F</td>
<td class="instruction">JR Z,<a href="9ADD.html#9B35">trees_castles_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B41"></span>9B41</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B44"></span>9B44</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B45"></span>9B45</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B46"></span>9B46</td>
<td class="instruction">JR NZ,<a href="9ADD.html#9B35">trees_castles_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B48"></span>9B48</td>
<td class="instruction">CALL <a href="98F1.html">routine15</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B4B"></span>9B4B</td>
<td class="instruction">JR NZ,<a href="9ADD.html#9B35">trees_castles_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B4D"></span>9B4D</td>
<td class="instruction">CALL <a href="98DB.html">routine14</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B50"></span>9B50</td>
<td class="instruction">JR NZ,<a href="9ADD.html#9B35">trees_castles_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B52"></span>9B52</td>
<td class="instruction">CALL <a href="A18A.html">routine20</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B55"></span>9B55</td>
<td class="instruction">LD A,(<a href="9167.html">spell_success_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B58"></span>9B58</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B59"></span>9B59</td>
<td class="instruction">JR Z,<a href="9ADD.html#9B71">trees_castles_spell_6</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B5B"></span>9B5B</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B5E"></span>9B5E</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B61"></span>9B61</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B62"></span>9B62</td>
<td class="instruction">LD DE,$01E1</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B65"></span>9B65</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B66"></span>9B66</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B69"></span>9B69</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B6A"></span>9B6A</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B6D"></span>9B6D</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B6E"></span>9B6E</td>
<td class="instruction">DJNZ <a href="9ADD.html#9B31">trees_castles_spell_4</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B70"></span>9B70</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell_6</td>
<td class="address-2"><span id="9B71"></span>9B71</td>
<td class="instruction">CALL <a href="97A3.html">routine11</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">trees_castles_spell_7</td>
<td class="address-2"><span id="9B74"></span>9B74</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B75"></span>9B75</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="99F1.html">99F1</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9ADD">Map</a></td>
<td class="next">
Next: <a href="9B76.html">9B76</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9ADD.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:17 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9B76.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:17 GMT -->
<head>
<title>Chaos: Routine at 9B76</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9ADD.html">9ADD</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9B76">Map</a></td>
<td class="next">
Next: <a href="9B85.html">9B85</a>
</td>
</tr>
</table>
<div class="description">9B76: Wall spell</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="asm-label">wall_spell</td>
<td class="address-2"><span id="9B76"></span>9B76</td>
<td class="instruction">LD A,$04</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B78"></span>9B78</td>
<td class="instruction">LD (<a href="97CE.html">unknown11</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B7B"></span>9B7B</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B7E"></span>9B7E</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B7F"></span>9B7F</td>
<td class="instruction">JR NZ,<a href="9B85.html">routine17</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B81"></span>9B81</td>
<td class="instruction">CALL <a href="981A.html">routine13</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9B84"></span>9B84</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9ADD.html">9ADD</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9B76">Map</a></td>
<td class="next">
Next: <a href="9B85.html">9B85</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9B76.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:17 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9C59.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:17 GMT -->
<head>
<title>Chaos: Routine at 9C59</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9C0F.html">9C0F</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9C59">Map</a></td>
<td class="next">
Next: <a href="9DE0.html">9DE0</a>
</td>
</tr>
</table>
<div class="description">9C59: Lightning spell</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="asm-label">lightning_spell</td>
<td class="address-2"><span id="9C59"></span>9C59</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C5C"></span>9C5C</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C5D"></span>9C5D</td>
<td class="instruction">JP NZ,<a href="9C59.html#9D8A">lightning_spell_10</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_0</td>
<td class="address-2"><span id="9C60"></span>9C60</td>
<td class="instruction">CALL <a href="BC96.html">routine41</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C63"></span>9C63</td>
<td class="instruction">CALL $02BF</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C66"></span>9C66</td>
<td class="instruction">CP $53</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C68"></span>9C68</td>
<td class="instruction">JR Z,<a href="9C59.html#9C76">lightning_spell_1</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C6A"></span>9C6A</td>
<td class="instruction">CP $4B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C6C"></span>9C6C</td>
<td class="instruction">JR NZ,<a href="9C59.html#9C60">lightning_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C6E"></span>9C6E</td>
<td class="instruction">LD HL,<a href="C2B1.html">sound_effect_18</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C71"></span>9C71</td>
<td class="instruction">CALL <a href="C2F6.html#C2F9">play_sound_effect_in_HL</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C74"></span>9C74</td>
<td class="instruction">EI</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C75"></span>9C75</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_1</td>
<td class="address-2"><span id="9C76"></span>9C76</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C79"></span>9C79</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C7A"></span>9C7A</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C7B"></span>9C7B</td>
<td class="instruction">JR Z,<a href="9C59.html#9C60">lightning_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C7D"></span>9C7D</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C7E"></span>9C7E</td>
<td class="instruction">LD HL,(<a href="AC14.html">D_ADD</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C81"></span>9C81</td>
<td class="instruction">XOR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C82"></span>9C82</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C84"></span>9C84</td>
<td class="instruction">JR Z,<a href="9C59.html#9C60">lightning_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C86"></span>9C86</td>
<td class="instruction">CALL <a href="9786.html">routine10</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C89"></span>9C89</td>
<td class="instruction">JP P,<a href="9C59.html#9CA4">lightning_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C8C"></span>9C8C</td>
<td class="instruction">CALL <a href="BED7.html">clear_bottom_row</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C8F"></span>9C8F</td>
<td class="instruction">LD BC,$1600</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C92"></span>9C92</td>
<td class="instruction">LD A,$45</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C94"></span>9C94</td>
<td class="instruction">LD ($5C8F),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C97"></span>9C97</td>
<td class="instruction">LD A,$35</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C99"></span>9C99</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C9C"></span>9C9C</td>
<td class="instruction">CALL <a href="BBCC.html">wait_no_key_seed</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9C9F"></span>9C9F</td>
<td class="instruction">CALL <a href="BBB0.html">wait_key_seed</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CA2"></span>9CA2</td>
<td class="instruction">JR <a href="9C59.html#9C60">lightning_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_2</td>
<td class="address-2"><span id="9CA4"></span>9CA4</td>
<td class="instruction">CALL <a href="98DB.html">routine14</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CA7"></span>9CA7</td>
<td class="instruction">JR NZ,<a href="9C59.html#9C60">lightning_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_3</td>
<td class="address-2"><span id="9CA9"></span>9CA9</td>
<td class="instruction">LD A,$05</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CAB"></span>9CAB</td>
<td class="instruction">LD (<a href="B60B.html">unknown48</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CAE"></span>9CAE</td>
<td class="instruction">LD HL,<a href="C275.html">sound_effect_13</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CB1"></span>9CB1</td>
<td class="instruction">LD (<a href="C2F3.html">sound_effect_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CB4"></span>9CB4</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CB7"></span>9CB7</td>
<td class="instruction">CP $2B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CB9"></span>9CB9</td>
<td class="instruction">JP M,<a href="9C59.html#9CC7">lightning_spell_4</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CBC"></span>9CBC</td>
<td class="instruction">LD HL,<a href="912B.html">sound_effect_04</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CBF"></span>9CBF</td>
<td class="instruction">LD (<a href="C2F3.html">sound_effect_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CC2"></span>9CC2</td>
<td class="instruction">LD A,$06</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CC4"></span>9CC4</td>
<td class="instruction">LD (<a href="B60B.html">unknown48</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_4</td>
<td class="address-2"><span id="9CC7"></span>9CC7</td>
<td class="instruction">CALL <a href="C2F6.html">play_sound_effect_pointer</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CCA"></span>9CCA</td>
<td class="instruction">CALL <a href="B626.html">routine28</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CCD"></span>9CCD</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CD0"></span>9CD0</td>
<td class="instruction">LD HL,<a href="C29D.html">S10</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CD3"></span>9CD3</td>
<td class="instruction">LD (<a href="C2F3.html">sound_effect_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CD6"></span>9CD6</td>
<td class="instruction">CALL <a href="C2F6.html">play_sound_effect_pointer</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CD9"></span>9CD9</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CDC"></span>9CDC</td>
<td class="instruction">LD (<a href="E005.html">temp_entry_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CDF"></span>9CDF</td>
<td class="instruction">CALL <a href="E007.html">address_to_coordinate</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CE2"></span>9CE2</td>
<td class="instruction">LD (<a href="DF4C.html">LC_POS</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CE5"></span>9CE5</td>
<td class="instruction">LD A,$47</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CE7"></span>9CE7</td>
<td class="instruction">LD ($5C8F),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CEA"></span>9CEA</td>
<td class="instruction">LD HL,<a href="BFB7.html">WOOP_D</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CED"></span>9CED</td>
<td class="instruction">LD B,$09</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CEF"></span>9CEF</td>
<td class="instruction">LD DE,$0020</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_5</td>
<td class="address-2"><span id="9CF2"></span>9CF2</td>
<td class="instruction">PUSH BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CF3"></span>9CF3</td>
<td class="instruction">PUSH HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CF4"></span>9CF4</td>
<td class="instruction">PUSH DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CF5"></span>9CF5</td>
<td class="instruction">LD (<a href="DF4A.html">C_DATA</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CF8"></span>9CF8</td>
<td class="instruction">CALL <a href="DF4E.html">P_CHAR</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CFB"></span>9CFB</td>
<td class="instruction">CALL <a href="C2F6.html#C301">sound_effect_playback</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CFE"></span>9CFE</td>
<td class="instruction">POP DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9CFF"></span>9CFF</td>
<td class="instruction">POP HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D00"></span>9D00</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D01"></span>9D01</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D02"></span>9D02</td>
<td class="instruction">DJNZ <a href="9C59.html#9CF2">lightning_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D04"></span>9D04</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D07"></span>9D07</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D0A"></span>9D0A</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D0B"></span>9D0B</td>
<td class="instruction">CP $23</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D0D"></span>9D0D</td>
<td class="instruction">JR Z,<a href="9C59.html#9D7F">lightning_spell_8</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D0F"></span>9D0F</td>
<td class="instruction">CP $28</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D11"></span>9D11</td>
<td class="instruction">JR Z,<a href="9C59.html#9D7F">lightning_spell_8</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D13"></span>9D13</td>
<td class="instruction">CP $27</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D15"></span>9D15</td>
<td class="instruction">JR Z,<a href="9C59.html#9D7F">lightning_spell_8</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D17"></span>9D17</td>
<td class="instruction">CP $26</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D19"></span>9D19</td>
<td class="instruction">JR Z,<a href="9C59.html#9D7F">lightning_spell_8</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D1B"></span>9D1B</td>
<td class="instruction">LD D,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D1C"></span>9D1C</td>
<td class="instruction">LD E,$10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D1E"></span>9D1E</td>
<td class="instruction">CALL <a href="BE0A.html">GETCHR</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D21"></span>9D21</td>
<td class="instruction">LD (<a href="A172.html">STRENG</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D24"></span>9D24</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D25"></span>9D25</td>
<td class="instruction">CP $29</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D27"></span>9D27</td>
<td class="instruction">JP M,<a href="9C59.html#9D41">lightning_spell_6</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D2A"></span>9D2A</td>
<td class="instruction">SUB $29</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D2C"></span>9D2C</td>
<td class="instruction">LD HL,<a href="AC16.html">unknown_table_3</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D2F"></span>9D2F</td>
<td class="instruction">LD D,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D31"></span>9D31</td>
<td class="instruction">LD E,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D32"></span>9D32</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D33"></span>9D33</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D34"></span>9D34</td>
<td class="instruction">AND $C0</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D36"></span>9D36</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D37"></span>9D37</td>
<td class="instruction">JR Z,<a href="9C59.html#9D41">lightning_spell_6</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D39"></span>9D39</td>
<td class="instruction">RLCA</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D3A"></span>9D3A</td>
<td class="instruction">RLCA</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D3B"></span>9D3B</td>
<td class="instruction">INC A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D3C"></span>9D3C</td>
<td class="instruction">LD HL,<a href="A172.html">STRENG</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D3F"></span>9D3F</td>
<td class="instruction">ADD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D40"></span>9D40</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_6</td>
<td class="address-2"><span id="9D41"></span>9D41</td>
<td class="instruction">CALL <a href="BE94.html">get_random</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D44"></span>9D44</td>
<td class="instruction">LD HL,<a href="A172.html">STRENG</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D47"></span>9D47</td>
<td class="instruction">ADD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D48"></span>9D48</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D49"></span>9D49</td>
<td class="instruction">CALL <a href="BE94.html">get_random</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D4C"></span>9D4C</td>
<td class="instruction">ADD A,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D4E"></span>9D4E</td>
<td class="instruction">LD E,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D4F"></span>9D4F</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D52"></span>9D52</td>
<td class="instruction">CP $2B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D54"></span>9D54</td>
<td class="instruction">JP M,<a href="9C59.html#9D5B">lightning_spell_7</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D57"></span>9D57</td>
<td class="instruction">LD A,E</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D58"></span>9D58</td>
<td class="instruction">ADD A,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D5A"></span>9D5A</td>
<td class="instruction">LD E,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_7</td>
<td class="address-2"><span id="9D5B"></span>9D5B</td>
<td class="instruction">LD A,E</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D5C"></span>9D5C</td>
<td class="instruction">LD HL,<a href="A172.html">STRENG</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D5F"></span>9D5F</td>
<td class="instruction">CP (HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D60"></span>9D60</td>
<td class="instruction">JP M,<a href="9C59.html#9D7F">lightning_spell_8</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D63"></span>9D63</td>
<td class="instruction">CALL <a href="99F1.html#9A52">disbelieve_spell_4</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D66"></span>9D66</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D69"></span>9D69</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D6A"></span>9D6A</td>
<td class="instruction">CP $29</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D6C"></span>9D6C</td>
<td class="instruction">JP P,<a href="9C59.html#9D83">lightning_spell_9</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D6F"></span>9D6F</td>
<td class="instruction">LD (HL),$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D71"></span>9D71</td>
<td class="instruction">LD DE,$0281</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D74"></span>9D74</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D75"></span>9D75</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D76"></span>9D76</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D77"></span>9D77</td>
<td class="instruction">JR Z,<a href="9C59.html#9D7F">lightning_spell_8</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D79"></span>9D79</td>
<td class="instruction">LD (HL),$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D7B"></span>9D7B</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D7E"></span>9D7E</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_8</td>
<td class="address-2"><span id="9D7F"></span>9D7F</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D82"></span>9D82</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_9</td>
<td class="address-2"><span id="9D83"></span>9D83</td>
<td class="instruction">CALL <a href="B3C9.html">WIZKIL</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D86"></span>9D86</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D89"></span>9D89</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_10</td>
<td class="address-2"><span id="9D8A"></span>9D8A</td>
<td class="instruction">LD HL,(<a href="AC14.html">D_ADD</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D8D"></span>9D8D</td>
<td class="instruction">LD (<a href="C649.html">X_ADD</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D90"></span>9D90</td>
<td class="instruction">LD (<a href="C78B.html">TEMADD</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D93"></span>9D93</td>
<td class="instruction">CALL <a href="CC56.html">FIREON</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D96"></span>9D96</td>
<td class="instruction">CALL <a href="9C59.html#9DB2">lightning_spell_13</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D99"></span>9D99</td>
<td class="instruction">CP $FF</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D9B"></span>9D9B</td>
<td class="instruction">JR NZ,<a href="9C59.html#9DA3">lightning_spell_11</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D9D"></span>9D9D</td>
<td class="instruction">LD A,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9D9F"></span>9D9F</td>
<td class="instruction">LD (<a href="975F.html">unknown10</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DA2"></span>9DA2</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_11</td>
<td class="address-2"><span id="9DA3"></span>9DA3</td>
<td class="instruction">CALL <a href="967A.html">display_wizard_spell_range</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DA6"></span>9DA6</td>
<td class="instruction">CALL <a href="9C59.html#9CA9">lightning_spell_3</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DA9"></span>9DA9</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_12</td>
<td class="address-2"><span id="9DAA"></span>9DAA</td>
<td class="instruction">LD HL,(<a href="CD86.html">BUFPNT</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DAD"></span>9DAD</td>
<td class="instruction">INC HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DAE"></span>9DAE</td>
<td class="instruction">INC HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DAF"></span>9DAF</td>
<td class="instruction">LD (<a href="CD86.html">BUFPNT</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_13</td>
<td class="address-2"><span id="9DB2"></span>9DB2</td>
<td class="instruction">LD HL,(<a href="CD86.html">BUFPNT</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DB5"></span>9DB5</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DB6"></span>9DB6</td>
<td class="instruction">CP $FF</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DB8"></span>9DB8</td>
<td class="instruction">RET Z</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DB9"></span>9DB9</td>
<td class="instruction">LD HL,<a href="E01F.html">map_object_table</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DBC"></span>9DBC</td>
<td class="instruction">LD D,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DBE"></span>9DBE</td>
<td class="instruction">LD E,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DBF"></span>9DBF</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DC0"></span>9DC0</td>
<td class="instruction">LD (<a href="AC12.html">object_table_entry_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DC3"></span>9DC3</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DC4"></span>9DC4</td>
<td class="instruction">CP $25</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DC6"></span>9DC6</td>
<td class="instruction">JR Z,<a href="9C59.html#9DD2">lightning_spell_14</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DC8"></span>9DC8</td>
<td class="instruction">CP $29</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DCA"></span>9DCA</td>
<td class="instruction">JP P,<a href="9C59.html#9DD2">lightning_spell_14</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DCD"></span>9DCD</td>
<td class="instruction">CP $23</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DCF"></span>9DCF</td>
<td class="instruction">JP P,<a href="9C59.html#9DAA">lightning_spell_12</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">lightning_spell_14</td>
<td class="address-2"><span id="9DD2"></span>9DD2</td>
<td class="instruction">CALL <a href="9786.html">routine10</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DD5"></span>9DD5</td>
<td class="instruction">JP M,<a href="9C59.html#9DAA">lightning_spell_12</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DD8"></span>9DD8</td>
<td class="instruction">CALL <a href="98DB.html">routine14</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DDB"></span>9DDB</td>
<td class="instruction">JP NZ,<a href="9C59.html#9DAA">lightning_spell_12</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DDE"></span>9DDE</td>
<td class="instruction">XOR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DDF"></span>9DDF</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9C0F.html">9C0F</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9C59">Map</a></td>
<td class="next">
Next: <a href="9DE0.html">9DE0</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9C59.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:17 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9DE0.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:17 GMT -->
<head>
<title>Chaos: Routine at 9DE0</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9C59.html">9C59</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9DE0">Map</a></td>
<td class="next">
Next: <a href="9F50.html">9F50</a>
</td>
</tr>
</table>
<div class="description">9DE0: DarkPowerEtc spell</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="asm-label">dark_power_spell</td>
<td class="address-2"><span id="9DE0"></span>9DE0</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DE3"></span>9DE3</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DE4"></span>9DE4</td>
<td class="instruction">JP NZ,<a href="9DE0.html#9EF9">dark_power_spell_12</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DE7"></span>9DE7</td>
<td class="instruction">CALL <a href="9760.html">routine09</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DEA"></span>9DEA</td>
<td class="instruction">LD A,(<a href="9167.html">spell_success_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DED"></span>9DED</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DEE"></span>9DEE</td>
<td class="instruction">JR NZ,<a href="9DE0.html#9DF4">dark_power_spell_0</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DF0"></span>9DF0</td>
<td class="instruction">CALL <a href="97A3.html">routine11</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DF3"></span>9DF3</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_0</td>
<td class="address-2"><span id="9DF4"></span>9DF4</td>
<td class="instruction">CALL <a href="BED7.html">clear_bottom_row</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DF7"></span>9DF7</td>
<td class="instruction">LD A,(<a href="9167.html">spell_success_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DFA"></span>9DFA</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DFB"></span>9DFB</td>
<td class="instruction">RET Z</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DFC"></span>9DFC</td>
<td class="instruction">LD B,$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9DFE"></span>9DFE</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E01"></span>9E01</td>
<td class="instruction">CP $2F</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E03"></span>9E03</td>
<td class="instruction">JP M,<a href="9DE0.html#9E08">dark_power_spell_1</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E06"></span>9E06</td>
<td class="instruction">LD B,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_1</td>
<td class="address-2"><span id="9E08"></span>9E08</td>
<td class="instruction">PUSH BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_2</td>
<td class="address-2"><span id="9E09"></span>9E09</td>
<td class="instruction">CALL <a href="BC96.html">routine41</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E0C"></span>9E0C</td>
<td class="instruction">CALL $02BF</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E0F"></span>9E0F</td>
<td class="instruction">CP $53</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E11"></span>9E11</td>
<td class="instruction">JR Z,<a href="9DE0.html#9E20">dark_power_spell_3</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E13"></span>9E13</td>
<td class="instruction">CP $4B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E15"></span>9E15</td>
<td class="instruction">JR NZ,<a href="9DE0.html#9E09">dark_power_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E17"></span>9E17</td>
<td class="instruction">LD HL,<a href="C2B1.html">sound_effect_18</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E1A"></span>9E1A</td>
<td class="instruction">CALL <a href="C2F6.html#C2F9">play_sound_effect_in_HL</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E1D"></span>9E1D</td>
<td class="instruction">EI</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E1E"></span>9E1E</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E1F"></span>9E1F</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_3</td>
<td class="address-2"><span id="9E20"></span>9E20</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E23"></span>9E23</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E24"></span>9E24</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E25"></span>9E25</td>
<td class="instruction">JR Z,<a href="9DE0.html#9E09">dark_power_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E27"></span>9E27</td>
<td class="instruction">CP $29</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E29"></span>9E29</td>
<td class="instruction">JP P,<a href="9DE0.html#9E31">dark_power_spell_4</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E2C"></span>9E2C</td>
<td class="instruction">CP $22</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E2E"></span>9E2E</td>
<td class="instruction">JP P,<a href="9DE0.html#9E09">dark_power_spell_2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_4</td>
<td class="address-2"><span id="9E31"></span>9E31</td>
<td class="instruction">CALL <a href="9DE0.html#9E38">dark_power_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E34"></span>9E34</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E35"></span>9E35</td>
<td class="instruction">DJNZ <a href="9DE0.html#9E08">dark_power_spell_1</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E37"></span>9E37</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_5</td>
<td class="address-2"><span id="9E38"></span>9E38</td>
<td class="instruction">LD HL,<a href="9135.html">sound_effect_05</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E3B"></span>9E3B</td>
<td class="instruction">LD (<a href="C2F3.html">sound_effect_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E3E"></span>9E3E</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E41"></span>9E41</td>
<td class="instruction">HALT</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E42"></span>9E42</td>
<td class="instruction">DI</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E43"></span>9E43</td>
<td class="instruction">LD HL,$D808</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E46"></span>9E46</td>
<td class="instruction">LD ($5C36),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E49"></span>9E49</td>
<td class="instruction">CALL <a href="C2F6.html">play_sound_effect_pointer</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E4C"></span>9E4C</td>
<td class="instruction">LD B,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_6</td>
<td class="address-2"><span id="9E4E"></span>9E4E</td>
<td class="instruction">PUSH BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E4F"></span>9E4F</td>
<td class="instruction">LD B,$07</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_7</td>
<td class="address-2"><span id="9E51"></span>9E51</td>
<td class="instruction">PUSH BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E52"></span>9E52</td>
<td class="instruction">LD A,B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E53"></span>9E53</td>
<td class="instruction">ADD A,$40</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E55"></span>9E55</td>
<td class="instruction">LD ($5C8D),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E58"></span>9E58</td>
<td class="instruction">LD A,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E5A"></span>9E5A</td>
<td class="instruction">LD ($5C8E),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E5D"></span>9E5D</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E60"></span>9E60</td>
<td class="instruction">CALL <a href="C703.html">routine53</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E63"></span>9E63</td>
<td class="instruction">LD (<a href="BC94.html">cursor_coordinates</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E66"></span>9E66</td>
<td class="instruction">LD A,$02</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E68"></span>9E68</td>
<td class="instruction">CALL $1601</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E6B"></span>9E6B</td>
<td class="instruction">LD BC,(<a href="BC94.html">cursor_coordinates</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E6F"></span>9E6F</td>
<td class="instruction">CALL <a href="BC8D.html">GET_LC</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E72"></span>9E72</td>
<td class="instruction">LD A,$16</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E74"></span>9E74</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E75"></span>9E75</td>
<td class="instruction">LD A,B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E76"></span>9E76</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E77"></span>9E77</td>
<td class="instruction">LD A,C</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E78"></span>9E78</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E79"></span>9E79</td>
<td class="instruction">LD A,$20</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E7B"></span>9E7B</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E7C"></span>9E7C</td>
<td class="instruction">LD A,$20</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E7E"></span>9E7E</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E7F"></span>9E7F</td>
<td class="instruction">INC B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E80"></span>9E80</td>
<td class="instruction">LD A,$16</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E82"></span>9E82</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E83"></span>9E83</td>
<td class="instruction">LD A,B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E84"></span>9E84</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E85"></span>9E85</td>
<td class="instruction">LD A,C</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E86"></span>9E86</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E87"></span>9E87</td>
<td class="instruction">LD A,$20</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E89"></span>9E89</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E8A"></span>9E8A</td>
<td class="instruction">LD A,$20</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E8C"></span>9E8C</td>
<td class="instruction">RST $10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E8D"></span>9E8D</td>
<td class="instruction">CALL <a href="C2F6.html#C301">sound_effect_playback</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E90"></span>9E90</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E91"></span>9E91</td>
<td class="instruction">DJNZ <a href="9DE0.html#9E51">dark_power_spell_7</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E93"></span>9E93</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E94"></span>9E94</td>
<td class="instruction">DJNZ <a href="9DE0.html#9E4E">dark_power_spell_6</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E96"></span>9E96</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E99"></span>9E99</td>
<td class="instruction">HALT</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E9A"></span>9E9A</td>
<td class="instruction">LD A,$FF</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E9C"></span>9E9C</td>
<td class="instruction">LD ($5C8E),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9E9F"></span>9E9F</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EA2"></span>9EA2</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EA3"></span>9EA3</td>
<td class="instruction">LD E,$13</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EA5"></span>9EA5</td>
<td class="instruction">CALL <a href="BE0A.html">GETCHR</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EA8"></span>9EA8</td>
<td class="instruction">LD E,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EA9"></span>9EA9</td>
<td class="instruction">CALL <a href="BE94.html">get_random</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EAC"></span>9EAC</td>
<td class="instruction">INC E</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EAD"></span>9EAD</td>
<td class="instruction">CP E</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EAE"></span>9EAE</td>
<td class="instruction">JP P,<a href="9DE0.html#9EB6">dark_power_spell_8</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EB1"></span>9EB1</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EB4"></span>9EB4</td>
<td class="instruction">HALT</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EB5"></span>9EB5</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_8</td>
<td class="address-2"><span id="9EB6"></span>9EB6</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EB9"></span>9EB9</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EBA"></span>9EBA</td>
<td class="instruction">CP $29</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EBC"></span>9EBC</td>
<td class="instruction">JP M,<a href="9DE0.html#9ED3">dark_power_spell_9</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EBF"></span>9EBF</td>
<td class="instruction">CALL <a href="99F1.html#9A52">disbelieve_spell_4</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EC2"></span>9EC2</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EC5"></span>9EC5</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EC6"></span>9EC6</td>
<td class="instruction">SUB $29</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EC8"></span>9EC8</td>
<td class="instruction">LD (<a href="AC00.html">unknown16</a>),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ECB"></span>9ECB</td>
<td class="instruction">CALL <a href="B3C9.html#B4FA">WIZKIL_10</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ECE"></span>9ECE</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ED1"></span>9ED1</td>
<td class="instruction">HALT</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ED2"></span>9ED2</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_9</td>
<td class="address-2"><span id="9ED3"></span>9ED3</td>
<td class="instruction">LD (HL),$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ED5"></span>9ED5</td>
<td class="instruction">LD DE,$0281</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ED8"></span>9ED8</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9ED9"></span>9ED9</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EDA"></span>9EDA</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EDB"></span>9EDB</td>
<td class="instruction">JR Z,<a href="9DE0.html#9EE5">dark_power_spell_10</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EDD"></span>9EDD</td>
<td class="instruction">LD (HL),$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EDF"></span>9EDF</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EE2"></span>9EE2</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EE3"></span>9EE3</td>
<td class="instruction">JR <a href="9DE0.html#9EF1">dark_power_spell_11</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_10</td>
<td class="address-2"><span id="9EE5"></span>9EE5</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EE8"></span>9EE8</td>
<td class="instruction">LD DE,$0321</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EEB"></span>9EEB</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EEC"></span>9EEC</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EED"></span>9EED</td>
<td class="instruction">LD HL,(<a href="AC12.html">object_table_entry_pointer</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EF0"></span>9EF0</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_11</td>
<td class="address-2"><span id="9EF1"></span>9EF1</td>
<td class="instruction">CALL <a href="99F1.html#9A52">disbelieve_spell_4</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EF4"></span>9EF4</td>
<td class="instruction">CALL <a href="C0DD.html">routine50</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EF7"></span>9EF7</td>
<td class="instruction">HALT</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EF8"></span>9EF8</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_12</td>
<td class="address-2"><span id="9EF9"></span>9EF9</td>
<td class="instruction">CALL <a href="967A.html">display_wizard_spell_range</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EFC"></span>9EFC</td>
<td class="instruction">CALL <a href="9760.html">routine09</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9EFF"></span>9EFF</td>
<td class="instruction">LD A,(<a href="9167.html">spell_success_flag</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F02"></span>9F02</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F03"></span>9F03</td>
<td class="instruction">JR NZ,<a href="9DE0.html#9F09">dark_power_spell_13</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F05"></span>9F05</td>
<td class="instruction">CALL <a href="97A3.html">routine11</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F08"></span>9F08</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_13</td>
<td class="address-2"><span id="9F09"></span>9F09</td>
<td class="instruction">LD B,$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F0B"></span>9F0B</td>
<td class="instruction">LD A,(<a href="937B.html">CURSP</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F0E"></span>9F0E</td>
<td class="instruction">CP $2F</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F10"></span>9F10</td>
<td class="instruction">JP M,<a href="9DE0.html#9F15">dark_power_spell_14</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F13"></span>9F13</td>
<td class="instruction">LD B,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_14</td>
<td class="address-2"><span id="9F15"></span>9F15</td>
<td class="instruction">PUSH BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F16"></span>9F16</td>
<td class="instruction">LD HL,(<a href="AC14.html">D_ADD</a>)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F19"></span>9F19</td>
<td class="instruction">LD (<a href="C649.html">X_ADD</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F1C"></span>9F1C</td>
<td class="instruction">LD (<a href="C78B.html">TEMADD</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F1F"></span>9F1F</td>
<td class="instruction">CALL <a href="CC56.html">FIREON</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F22"></span>9F22</td>
<td class="instruction">LD HL,<a href="D3F2.html">INBUF</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F25"></span>9F25</td>
<td class="instruction">LD (<a href="CD86.html">BUFPNT</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_15</td>
<td class="address-2"><span id="9F28"></span>9F28</td>
<td class="instruction">CALL <a href="A17E.html">GETPLA</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F2B"></span>9F2B</td>
<td class="instruction">CP $FF</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F2D"></span>9F2D</td>
<td class="instruction">JR NZ,<a href="9DE0.html#9F31">dark_power_spell_16</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F2F"></span>9F2F</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F30"></span>9F30</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_16</td>
<td class="address-2"><span id="9F31"></span>9F31</td>
<td class="instruction">LD D,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F33"></span>9F33</td>
<td class="instruction">LD E,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F34"></span>9F34</td>
<td class="instruction">LD HL,<a href="E01F.html">map_object_table</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F37"></span>9F37</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F38"></span>9F38</td>
<td class="instruction">LD (<a href="AC12.html">object_table_entry_pointer</a>),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F3B"></span>9F3B</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F3C"></span>9F3C</td>
<td class="instruction">OR A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F3D"></span>9F3D</td>
<td class="instruction">JR Z,<a href="9DE0.html#9F28">dark_power_spell_15</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F3F"></span>9F3F</td>
<td class="instruction">CP $29</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F41"></span>9F41</td>
<td class="instruction">JP P,<a href="9DE0.html#9F49">dark_power_spell_17</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F44"></span>9F44</td>
<td class="instruction">CP $22</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F46"></span>9F46</td>
<td class="instruction">JP P,<a href="9DE0.html#9F28">dark_power_spell_15</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">dark_power_spell_17</td>
<td class="address-2"><span id="9F49"></span>9F49</td>
<td class="instruction">CALL <a href="9DE0.html#9E38">dark_power_spell_5</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F4C"></span>9F4C</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F4D"></span>9F4D</td>
<td class="instruction">DJNZ <a href="9DE0.html#9F15">dark_power_spell_14</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9F4F"></span>9F4F</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9C59.html">9C59</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#9DE0">Map</a></td>
<td class="next">
Next: <a href="9F50.html">9F50</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/9DE0.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:17 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/BEEF.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:28 GMT -->
<head>
<title>Chaos: Routine at BEEF</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="BEEE.html">BEEE</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#BEEF">Map</a></td>
<td class="next">
Next: <a href="BF37.html">BF37</a>
</td>
</tr>
</table>
<div class="description">BEEF: Calculate the distance between two pairs of coordinates.</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="9786.html">routine10</a>, <a href="B0A8.html">routine24</a>, <a href="B8DD.html">routine35</a>, <a href="C67A.html">routine52</a>, <a href="C7BC.html">EN_AN</a>, <a href="C8C7.html">routine59</a>, <a href="C955.html">routine60</a>, <a href="CA7C.html">routine63</a> and <a href="CBC7.html">routine66</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="BEEF"></span>
<div class="comments">
<div class="paragraph">
The result is stored in <a href="BEE8.html">total_distance</a>. The value in the A register is compared with the result.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">calculate_distance</td>
<td class="address-2"><span id="BEEF"></span>BEEF</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="4">Preserve registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEF0"></span>BEF0</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEF1"></span>BEF1</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEF2"></span>BEF2</td>
<td class="instruction">PUSH AF</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEF3"></span>BEF3</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">Clear A and flags. This is unnecessary.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEF4"></span>BEF4</td>
<td class="instruction">LD HL,(<a href="BEE9.html">unknown75</a>)</td>
<td class="comment-1" rowspan="1">Load <a href="BEE9.html">unknown75</a> into HL.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEF7"></span>BEF7</td>
<td class="instruction">LD DE,(<a href="BEEB.html">unknown76</a>)</td>
<td class="comment-1" rowspan="1">Load <a href="BEEB.html">unknown76</a> into DE.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEFB"></span>BEFB</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="6">If y-coordinate of <a href="BEEB.html">unknown76</a> is greater than or equal to y-coordinate of <a href="BEE9.html">unknown75</a>, store D-H in <a href="BEEE.html">y_difference</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEFC"></span>BEFC</td>
<td class="instruction">CP H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BEFD"></span>BEFD</td>
<td class="instruction">JP M,<a href="BEEF.html#BF06">D_less_than_H</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF00"></span>BF00</td>
<td class="instruction">SUB H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF01"></span>BF01</td>
<td class="instruction">LD (<a href="BEEE.html">y_difference</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF04"></span>BF04</td>
<td class="instruction">JR <a href="BEEF.html#BF0B">calculate_distance_0</a></td>
</tr>
<tr>
<td class="asm-label">D_less_than_H</td>
<td class="address-2"><span id="BF06"></span>BF06</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="3">Else store H-D in <a href="BEEE.html">y_difference</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF07"></span>BF07</td>
<td class="instruction">SUB D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF08"></span>BF08</td>
<td class="instruction">LD (<a href="BEEE.html">y_difference</a>),A</td>
</tr>
<tr>
<td class="asm-label">calculate_distance_0</td>
<td class="address-2"><span id="BF0B"></span>BF0B</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="6">If x-coordinate of <a href="BEEB.html">unknown76</a> is greater than or equal to y-coordinate of <a href="BEE9.html">unknown75</a>, store E-L in <a href="BEED.html">x_difference</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF0C"></span>BF0C</td>
<td class="instruction">CP L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF0D"></span>BF0D</td>
<td class="instruction">JP M,<a href="BEEF.html#BF16">E_less_than_L</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF10"></span>BF10</td>
<td class="instruction">SUB L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF11"></span>BF11</td>
<td class="instruction">LD (<a href="BEED.html">x_difference</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF14"></span>BF14</td>
<td class="instruction">JR <a href="BEEF.html#BF1B">done_x_diff</a></td>
</tr>
<tr>
<td class="asm-label">E_less_than_L</td>
<td class="address-2"><span id="BF16"></span>BF16</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="3">Else store L-E in <a href="BEED.html">x_difference</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF17"></span>BF17</td>
<td class="instruction">SUB E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF18"></span>BF18</td>
<td class="instruction">LD (<a href="BEED.html">x_difference</a>),A</td>
</tr>
<tr>
<td class="asm-label">done_x_diff</td>
<td class="address-2"><span id="BF1B"></span>BF1B</td>
<td class="instruction">LD HL,(<a href="BEED.html">x_difference</a>)</td>
<td class="comment-1" rowspan="2">Load <a href="BEEE.html">y_difference</a> into H and <a href="BEED.html">x_difference</a> into L.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF1E"></span>BF1E</td>
<td class="instruction">LD A,H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF1F"></span>BF1F</td>
<td class="instruction">CP L</td>
<td class="comment-1" rowspan="6">If <a href="BEEE.html">y_difference</a> is greater than or equal to <a href="BEED.html">x_difference</a>, double it and add <a href="BEED.html">x_difference</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF20"></span>BF20</td>
<td class="instruction">JP M,<a href="BEEF.html#BF29">y_diff_less</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF23"></span>BF23</td>
<td class="instruction">SLA H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF25"></span>BF25</td>
<td class="instruction">LD A,H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF26"></span>BF26</td>
<td class="instruction">ADD A,L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF27"></span>BF27</td>
<td class="instruction">JR <a href="BEEF.html#BF2D">done_difference</a></td>
</tr>
<tr>
<td class="asm-label">y_diff_less</td>
<td class="address-2"><span id="BF29"></span>BF29</td>
<td class="instruction">SLA L</td>
<td class="comment-1" rowspan="3">Else double <a href="BEED.html">x_difference</a> and add <a href="BEEE.html">y_difference</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF2B"></span>BF2B</td>
<td class="instruction">LD A,L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF2C"></span>BF2C</td>
<td class="instruction">ADD A,H</td>
</tr>
<tr>
<td class="asm-label">done_difference</td>
<td class="address-2"><span id="BF2D"></span>BF2D</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="2">Store result in <a href="BEE8.html">total_distance</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF2E"></span>BF2E</td>
<td class="instruction">LD (<a href="BEE8.html">total_distance</a>),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF31"></span>BF31</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="2">Restore A register and compare with result.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF32"></span>BF32</td>
<td class="instruction">CP E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF33"></span>BF33</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="4">Restore remaining registers and return.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF34"></span>BF34</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF35"></span>BF35</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="BF36"></span>BF36</td>
<td class="instruction">RET</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="BEEE.html">BEEE</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#BEEF">Map</a></td>
<td class="next">
Next: <a href="BF37.html">BF37</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/BEEF.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:28 GMT -->
</html><!DOCTYPE html>
<html>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/967A.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:20 GMT -->
<head>
<title>Chaos: Routine at 967A</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-zxnet.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="https://zxnet.co.uk/spectrum/chaos/index.html"><img alt="Chaos" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="95C7.html">95C7</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#967A">Map</a></td>
<td class="next">
Next: <a href="96D1.html">96D1</a>
</td>
</tr>
</table>
<div class="description">967A: Display wizard name, spell being cast, and spell casting range</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="8357.html">routine04</a>, <a href="84B0.html">chaos_law_spell</a>, <a href="84F7.html">subversion_spell</a>, <a href="85F6.html">raise_dead_spell</a>, <a href="86EF.html">turmoil_spell</a>, <a href="95C7.html">routine06</a>, <a href="9975.html">creature_cast_spell</a>, <a href="99F1.html">disbelieve_spell</a>, <a href="9ADD.html">trees_castles_spell</a>, <a href="9BB3.html">routine18</a>, <a href="9C59.html">lightning_spell</a>, <a href="9DE0.html">dark_power_spell</a>, <a href="D686.html">routine77</a>, <a href="D7A6.html">routine81</a>, <a href="D82D.html">routine83</a> and <a href="D8DE.html">routine85</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">display_wizard_spell_range</td>
<td class="address-2"><span id="967A"></span>967A</td>
<td class="instruction">LD A,$46</td>
<td class="comment-1" rowspan="2">set ATTR-T to $46 (bright yellow on black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="967C"></span>967C</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="967F"></span>967F</td>
<td class="instruction">LD A,(<a href="AC0E.html">current_player</a>)</td>
<td class="comment-1" rowspan="2">load value of <a href="AC0E.html">current_player</a> variable and add 41</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9682"></span>9682</td>
<td class="instruction">ADD A,$29</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9684"></span>9684</td>
<td class="instruction">LD BC,$1600</td>
<td class="comment-1" rowspan="2">print wizard name at coordinates (0,22)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9687"></span>9687</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="968A"></span>968A</td>
<td class="instruction">CALL <a href="96D1.html">routine07</a></td>
<td class="comment-1" rowspan="1">call routine at <a href="96D1.html">routine07</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="968D"></span>968D</td>
<td class="instruction">LD A,$44</td>
<td class="comment-1" rowspan="2">set ATTR-T to $44 (bright green on black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="968F"></span>968F</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9692"></span>9692</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="1">load byte at IX+0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9695"></span>9695</td>
<td class="instruction">CALL <a href="BAFB.html">MPRINT</a></td>
<td class="comment-1" rowspan="1">Print spell being cast</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9698"></span>9698</td>
<td class="instruction">CALL <a href="96D1.html">routine07</a></td>
<td class="comment-1" rowspan="1">call routine at <a href="96D1.html">routine07</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="969B"></span>969B</td>
<td class="instruction">LD A,$47</td>
<td class="comment-1" rowspan="2">set ATTR-T to $47 (bright white on black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="969D"></span>969D</td>
<td class="instruction">LD ($5C8F),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96A0"></span>96A0</td>
<td class="instruction">INC C</td>
<td class="comment-1" rowspan="1">increment C to move right one column</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96A1"></span>96A1</td>
<td class="instruction">LD A,(IX+$02)</td>
<td class="comment-1" rowspan="1">load byte at IX+2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96A4"></span>96A4</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1">divide it by 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96A6"></span>96A6</td>
<td class="instruction">CP $0A</td>
<td class="comment-1" rowspan="2">if spell casting range is greater than nine, then jump to <a href="967A.html#96B2">display_wizard_spell_range_0</a> to print the number twenty.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96A8"></span>96A8</td>
<td class="instruction">JP P,<a href="967A.html#96B2">display_wizard_spell_range_0</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96AB"></span>96AB</td>
<td class="instruction">ADD A,$30</td>
<td class="comment-1" rowspan="1">add 48 to A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96AD"></span>96AD</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
<td class="comment-1" rowspan="1">call <a href="BAD6.html">DH_P</a> to display a number from 0-9</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96B0"></span>96B0</td>
<td class="instruction">JR <a href="967A.html#96BF">display_wizard_spell_range_1</a></td>
<td class="comment-1" rowspan="1">jump to <a href="967A.html#96BF">display_wizard_spell_range_1</a></td>
</tr>
<tr>
<td class="asm-label">display_wizard_spell_range_0</td>
<td class="address-2"><span id="96B2"></span>96B2</td>
<td class="instruction">LD A,$32</td>
<td class="comment-1" rowspan="1">load A with $32 ('2')</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96B4"></span>96B4</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">preserve BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96B5"></span>96B5</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
<td class="comment-1" rowspan="1">call <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96B8"></span>96B8</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">restore BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96B9"></span>96B9</td>
<td class="instruction">INC C</td>
<td class="comment-1" rowspan="1">increment C to move right one column</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96BA"></span>96BA</td>
<td class="instruction">LD A,$30</td>
<td class="comment-1" rowspan="1">load A with $30 ('0')</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96BC"></span>96BC</td>
<td class="instruction">CALL <a href="BAD6.html">DH_P</a></td>
<td class="comment-1" rowspan="1">call <a href="BAD6.html">DH_P</a></td>
</tr>
<tr>
<td class="asm-label">display_wizard_spell_range_1</td>
<td class="address-2"><span id="96BF"></span>96BF</td>
<td class="instruction">CALL <a href="96D1.html">routine07</a></td>
<td class="comment-1" rowspan="1">call routine at <a href="96D1.html">routine07</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96C2"></span>96C2</td>
<td class="instruction">LD A,(<a href="AC2E.html">computer_player_flag</a>)</td>
<td class="comment-1" rowspan="3">return if <a href="AC2E.html">computer_player_flag</a> is zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96C5"></span>96C5</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96C6"></span>96C6</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96C7"></span>96C7</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1">set B to 8 as loop counter</td>
</tr>
<tr>
<td class="asm-label">display_wizard_spell_range_2</td>
<td class="address-2"><span id="96C9"></span>96C9</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">stack loop counter</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96CA"></span>96CA</td>
<td class="instruction">CALL <a href="96E6.html">PAUSER</a></td>
<td class="comment-1" rowspan="1">call <a href="96E6.html">PAUSER</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96CD"></span>96CD</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">restore loop counter</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96CE"></span>96CE</td>
<td class="instruction">DJNZ <a href="967A.html#96C9">display_wizard_spell_range_2</a></td>
<td class="comment-1" rowspan="1">loop back to <a href="967A.html#96C9">display_wizard_spell_range_2</a> seven times</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="96D0"></span>96D0</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">return</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="95C7.html">95C7</a>
</td>
<td class="up">Up: <a href="https://zxnet.co.uk/spectrum/chaos/maps/all.html#967A">Map</a></td>
<td class="next">
Next: <a href="96D1.html">96D1</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; Games Workshop 1985. Disassembly by Guesser and szeliga &#169; 2022</div>
<div class="created">Created using <a href="https://skoolkit.ca/">SkoolKit</a> 8.6.</div>
</footer>
</body>

<!-- Mirrored from zxnet.co.uk/spectrum/chaos/asm/967A.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 09:19:20 GMT -->
</html>